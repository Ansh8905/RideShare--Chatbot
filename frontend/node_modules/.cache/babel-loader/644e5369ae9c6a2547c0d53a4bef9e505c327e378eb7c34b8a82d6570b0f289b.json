{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ASUS-PC\\\\Desktop\\\\Projects\\\\RideShare--Chatbot\\\\frontend\\\\src\\\\components\\\\Chatbot.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useRef } from 'react';\nimport ChatbotApiService from '../services/chatbotApi';\nimport '../styles/chatbot.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Chatbot = ({\n  bookingId,\n  userId,\n  driverId,\n  apiUrl,\n  onEscalation,\n  onClose\n}) => {\n  _s();\n  const [conversationId, setConversationId] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [inputText, setInputText] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [isEscalated, setIsEscalated] = useState(false);\n  const [escalationType, setEscalationType] = useState(null);\n  const [quickActions, setQuickActions] = useState([]);\n  const messagesEndRef = useRef(null);\n  const apiService = useRef(new ChatbotApiService(apiUrl));\n\n  // Initialize chatbot on mount\n  useEffect(() => {\n    initializeChatbot();\n  }, [bookingId, userId]);\n\n  // Scroll to bottom when new messages arrive\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n  const scrollToBottom = () => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  };\n  const initializeChatbot = async () => {\n    try {\n      setIsLoading(true);\n      setError(null);\n      const response = await apiService.current.initiateChatbot(bookingId, userId, driverId);\n      setConversationId(response.conversationId);\n\n      // Add greeting message\n      const greetingMessage = {\n        id: `msg_${Date.now()}`,\n        sender: 'bot',\n        text: response.message,\n        timestamp: new Date(),\n        metadata: {\n          source: 'api',\n          endpoint: '/api/chatbot/initiate'\n        }\n      };\n      setMessages([greetingMessage]);\n\n      // Set quick actions\n      const actions = (response.suggestedActions || []).map(action => ({\n        id: action,\n        label: formatActionLabel(action),\n        action\n      }));\n      setQuickActions(actions);\n    } catch (err) {\n      const errorMessage = err instanceof Error ? err.message : 'Failed to initialize chatbot';\n      setError(errorMessage);\n      console.error('Chatbot initialization error:', err);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const formatActionLabel = action => {\n    const labels = {\n      where_is_driver: 'üìç Where is my driver?',\n      driver_late: '‚è∞ Driver is late',\n      contact_driver: 'üìû Contact driver',\n      cannot_contact_driver: '‚ùå Cannot reach driver',\n      cancel_booking: 'üö´ Cancel booking',\n      talk_to_agent: 'üë§ Talk to agent',\n      call_driver: 'üìû Call driver',\n      message_driver: 'üí¨ Message driver',\n      payment_query: 'üí≥ Payment question',\n      safety_concern: '‚ö†Ô∏è Safety concern'\n    };\n    return labels[action] || action.replace(/_/g, ' ');\n  };\n  const handleSendMessage = async e => {\n    e.preventDefault();\n    if (!inputText.trim() || !conversationId) {\n      return;\n    }\n\n    // Add user message\n    const messageText = inputText;\n    const userMessage = {\n      id: `msg_${Date.now()}`,\n      sender: 'user',\n      text: messageText,\n      timestamp: new Date()\n    };\n    setMessages(prev => [...prev, userMessage]);\n    setInputText('');\n    setIsLoading(true);\n    setError(null);\n    try {\n      const response = await apiService.current.sendMessage(conversationId, bookingId, userId, messageText);\n\n      // Add bot response\n      const botMessage = {\n        id: `msg_${Date.now()}`,\n        sender: 'bot',\n        text: response.message,\n        timestamp: new Date(),\n        metadata: {\n          ...response.metadata,\n          source: 'api',\n          endpoint: '/api/chatbot/message'\n        }\n      };\n      setMessages(prev => [...prev, botMessage]);\n\n      // Update quick actions\n      if (response.suggestedActions) {\n        const actions = response.suggestedActions.map(action => ({\n          id: action,\n          label: formatActionLabel(action),\n          action\n        }));\n        setQuickActions(actions);\n      }\n\n      // Handle escalation\n      if (response.requiresEscalation) {\n        setIsEscalated(true);\n        setEscalationType(response.escalationType);\n        if (onEscalation) {\n          onEscalation(response.escalationType);\n        }\n        const escalationMessage = {\n          id: `msg_${Date.now()}`,\n          sender: 'bot',\n          text: `I'm escalating your issue to ${response.escalationType} support. Please stand by until they connect with you.`,\n          timestamp: new Date()\n        };\n        setTimeout(() => {\n          setMessages(prev => [...prev, escalationMessage]);\n        }, 1000);\n      }\n    } catch (err) {\n      const errorMessage = err instanceof Error ? err.message : 'Failed to send message';\n      setError(errorMessage);\n      console.error('Message send error:', err);\n      const errorBotMessage = {\n        id: `msg_${Date.now()}`,\n        sender: 'bot',\n        text: 'Sorry, I encountered an error. Let me connect you with support.',\n        timestamp: new Date()\n      };\n      setMessages(prev => [...prev, errorBotMessage]);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const handleQuickAction = async action => {\n    if (!conversationId) {\n      return;\n    }\n    setIsLoading(true);\n    setError(null);\n    try {\n      const response = await apiService.current.sendQuickAction(conversationId, bookingId, userId, action);\n\n      // Add action as user message\n      const userMessage = {\n        id: `msg_${Date.now()}`,\n        sender: 'user',\n        text: formatActionLabel(action),\n        timestamp: new Date()\n      };\n      setMessages(prev => [...prev, userMessage]);\n\n      // Add bot response\n      const botMessage = {\n        id: `msg_${Date.now()}`,\n        sender: 'bot',\n        text: response.message,\n        timestamp: new Date(),\n        metadata: {\n          ...response.metadata,\n          source: 'api',\n          endpoint: '/api/chatbot/quick-action'\n        }\n      };\n      setMessages(prev => [...prev, botMessage]);\n\n      // Update quick actions\n      if (response.suggestedActions) {\n        const actions = response.suggestedActions.map(a => ({\n          id: a,\n          label: formatActionLabel(a),\n          action: a\n        }));\n        setQuickActions(actions);\n      }\n\n      // Handle escalation\n      if (response.requiresEscalation) {\n        setIsEscalated(true);\n        setEscalationType(response.escalationType);\n        if (onEscalation) {\n          onEscalation(response.escalationType);\n        }\n      }\n    } catch (err) {\n      const errorMessage = err instanceof Error ? err.message : 'Failed to process action';\n      setError(errorMessage);\n      console.error('Quick action error:', err);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const handleCloseChat = async () => {\n    if (conversationId) {\n      try {\n        await apiService.current.closeConversation(conversationId, 'User closed chat');\n      } catch (err) {\n        console.error('Error closing conversation:', err);\n      }\n    }\n    if (onClose) {\n      onClose();\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chatbot-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chatbot-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chatbot-header-left\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chatbot-header-avatar\",\n          children: \"\\uD83E\\uDD16\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"RideShare AI\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"chatbot-header-status\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"online-dot\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 15\n            }, this), \"Online \\u2022 Powered by API\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"close-btn\",\n        onClick: handleCloseChat,\n        title: \"Close chat\",\n        children: \"\\u2715\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chatbot-messages\",\n      children: [messages.map(message => {\n        var _message$metadata;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `message message-${message.sender}`,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"message-content\",\n            children: [message.sender === 'bot' && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"message-avatar\",\n              children: \"\\uD83E\\uDD16\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 291,\n              columnNumber: 44\n            }, this), message.sender === 'user' && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"message-avatar\",\n              children: \"\\uD83D\\uDC64\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 45\n            }, this), message.sender === 'driver' && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"message-avatar\",\n              children: \"\\uD83D\\uDE97\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 293,\n              columnNumber: 47\n            }, this), message.sender === 'support_agent' && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"message-avatar\",\n              children: \"\\uD83D\\uDC68\\u200D\\uD83D\\uDCBC\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 294,\n              columnNumber: 54\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"message-text\",\n                children: message.text\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 296,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"message-time\",\n                children: message.timestamp.toLocaleTimeString([], {\n                  hour: '2-digit',\n                  minute: '2-digit'\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 297,\n                columnNumber: 17\n              }, this), message.sender === 'bot' && ((_message$metadata = message.metadata) === null || _message$metadata === void 0 ? void 0 : _message$metadata.source) === 'api' && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"message-api-badge\",\n                children: \"API Response\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 304,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 295,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 290,\n            columnNumber: 13\n          }, this)\n        }, message.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 11\n        }, this);\n      }), isLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"message message-bot\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"message-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"message-avatar\",\n            children: \"\\uD83E\\uDD16\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 316,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"typing-indicator\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 318,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 319,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 320,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 317,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 11\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-message\",\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"\\u26A0 Error:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 13\n        }, this), \" \", error]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: messagesEndRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 332,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 7\n    }, this), isEscalated && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"escalation-notice\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"\\uD83D\\uDD14 Your chat has been escalated to \", escalationType || 'support', \". They will be with you shortly.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 336,\n      columnNumber: 9\n    }, this), !isEscalated && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [quickActions.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"quick-actions\",\n        children: quickActions.map(action => /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"quick-action-btn\",\n          onClick: () => handleQuickAction(action.action),\n          disabled: isLoading,\n          children: action.label\n        }, action.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 17\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 347,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSendMessage,\n        className: \"chatbot-input-form\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: inputText,\n          onChange: e => setInputText(e.target.value),\n          placeholder: \"Ask anything about your ride...\",\n          disabled: isLoading || isEscalated,\n          className: \"chatbot-input\",\n          id: \"chat-input\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          disabled: isLoading || !inputText.trim() || isEscalated,\n          className: \"send-btn\",\n          id: \"chat-send-btn\",\n          children: \"\\u27A4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 371,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 361,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-powered-by\",\n        children: \"Responses powered by RideShare API \\u2022 Real-time data\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 381,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 270,\n    columnNumber: 5\n  }, this);\n};\n_s(Chatbot, \"XYOU24QxU1lVLzz64WdhcXHrzvM=\");\n_c = Chatbot;\nexport default Chatbot;\nvar _c;\n$RefreshReg$(_c, \"Chatbot\");","map":{"version":3,"names":["React","useEffect","useState","useRef","ChatbotApiService","jsxDEV","_jsxDEV","Fragment","_Fragment","Chatbot","bookingId","userId","driverId","apiUrl","onEscalation","onClose","_s","conversationId","setConversationId","messages","setMessages","inputText","setInputText","isLoading","setIsLoading","error","setError","isEscalated","setIsEscalated","escalationType","setEscalationType","quickActions","setQuickActions","messagesEndRef","apiService","initializeChatbot","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","response","initiateChatbot","greetingMessage","id","Date","now","sender","text","message","timestamp","metadata","source","endpoint","actions","suggestedActions","map","action","label","formatActionLabel","err","errorMessage","Error","console","labels","where_is_driver","driver_late","contact_driver","cannot_contact_driver","cancel_booking","talk_to_agent","call_driver","message_driver","payment_query","safety_concern","replace","handleSendMessage","e","preventDefault","trim","messageText","userMessage","prev","sendMessage","botMessage","requiresEscalation","escalationMessage","setTimeout","errorBotMessage","handleQuickAction","sendQuickAction","a","handleCloseChat","closeConversation","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","title","_message$metadata","toLocaleTimeString","hour","minute","ref","length","disabled","onSubmit","type","value","onChange","target","placeholder","_c","$RefreshReg$"],"sources":["C:/Users/ASUS-PC/Desktop/Projects/RideShare--Chatbot/frontend/src/components/Chatbot.tsx"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\r\nimport ChatbotApiService from '../services/chatbotApi';\r\nimport { ChatbotProps, Message, QuickActionButton } from '../types';\r\nimport '../styles/chatbot.css';\r\n\r\nconst Chatbot: React.FC<ChatbotProps> = ({\r\n  bookingId,\r\n  userId,\r\n  driverId,\r\n  apiUrl,\r\n  onEscalation,\r\n  onClose,\r\n}) => {\r\n  const [conversationId, setConversationId] = useState<string | null>(null);\r\n  const [messages, setMessages] = useState<Message[]>([]);\r\n  const [inputText, setInputText] = useState('');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [isEscalated, setIsEscalated] = useState(false);\r\n  const [escalationType, setEscalationType] = useState<'driver' | 'support' | 'safety' | null>(null);\r\n  const [quickActions, setQuickActions] = useState<QuickActionButton[]>([]);\r\n  const messagesEndRef = useRef<HTMLDivElement>(null);\r\n  const apiService = useRef(new ChatbotApiService(apiUrl));\r\n\r\n  // Initialize chatbot on mount\r\n  useEffect(() => {\r\n    initializeChatbot();\r\n  }, [bookingId, userId]);\r\n\r\n  // Scroll to bottom when new messages arrive\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [messages]);\r\n\r\n  const scrollToBottom = () => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  };\r\n\r\n  const initializeChatbot = async () => {\r\n    try {\r\n      setIsLoading(true);\r\n      setError(null);\r\n\r\n      const response = await apiService.current.initiateChatbot(bookingId, userId, driverId);\r\n\r\n      setConversationId(response.conversationId);\r\n\r\n      // Add greeting message\r\n      const greetingMessage: Message = {\r\n        id: `msg_${Date.now()}`,\r\n        sender: 'bot',\r\n        text: response.message,\r\n        timestamp: new Date(),\r\n        metadata: { source: 'api', endpoint: '/api/chatbot/initiate' },\r\n      };\r\n\r\n      setMessages([greetingMessage]);\r\n\r\n      // Set quick actions\r\n      const actions: QuickActionButton[] = (response.suggestedActions || []).map(\r\n        (action: string) => ({\r\n          id: action,\r\n          label: formatActionLabel(action),\r\n          action,\r\n        })\r\n      );\r\n      setQuickActions(actions);\r\n    } catch (err) {\r\n      const errorMessage = err instanceof Error ? err.message : 'Failed to initialize chatbot';\r\n      setError(errorMessage);\r\n      console.error('Chatbot initialization error:', err);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const formatActionLabel = (action: string): string => {\r\n    const labels: Record<string, string> = {\r\n      where_is_driver: 'üìç Where is my driver?',\r\n      driver_late: '‚è∞ Driver is late',\r\n      contact_driver: 'üìû Contact driver',\r\n      cannot_contact_driver: '‚ùå Cannot reach driver',\r\n      cancel_booking: 'üö´ Cancel booking',\r\n      talk_to_agent: 'üë§ Talk to agent',\r\n      call_driver: 'üìû Call driver',\r\n      message_driver: 'üí¨ Message driver',\r\n      payment_query: 'üí≥ Payment question',\r\n      safety_concern: '‚ö†Ô∏è Safety concern',\r\n    };\r\n    return labels[action] || action.replace(/_/g, ' ');\r\n  };\r\n\r\n  const handleSendMessage = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n\r\n    if (!inputText.trim() || !conversationId) {\r\n      return;\r\n    }\r\n\r\n    // Add user message\r\n    const messageText = inputText;\r\n    \r\n    const userMessage: Message = {\r\n      id: `msg_${Date.now()}`,\r\n      sender: 'user',\r\n      text: messageText,\r\n      timestamp: new Date(),\r\n    };\r\n\r\n    setMessages((prev) => [...prev, userMessage]);\r\n    setInputText('');\r\n    setIsLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const response = await apiService.current.sendMessage(\r\n        conversationId,\r\n        bookingId,\r\n        userId,\r\n        messageText\r\n      );\r\n\r\n      // Add bot response\r\n      const botMessage: Message = {\r\n        id: `msg_${Date.now()}`,\r\n        sender: 'bot',\r\n        text: response.message,\r\n        timestamp: new Date(),\r\n        metadata: {\r\n          ...response.metadata,\r\n          source: 'api',\r\n          endpoint: '/api/chatbot/message',\r\n        },\r\n      };\r\n\r\n      setMessages((prev) => [...prev, botMessage]);\r\n\r\n      // Update quick actions\r\n      if (response.suggestedActions) {\r\n        const actions: QuickActionButton[] = response.suggestedActions.map((action: string) => ({\r\n          id: action,\r\n          label: formatActionLabel(action),\r\n          action,\r\n        }));\r\n        setQuickActions(actions);\r\n      }\r\n\r\n      // Handle escalation\r\n      if (response.requiresEscalation) {\r\n        setIsEscalated(true);\r\n        setEscalationType(response.escalationType as 'driver' | 'support' | 'safety');\r\n\r\n        if (onEscalation) {\r\n          onEscalation(response.escalationType);\r\n        }\r\n\r\n        const escalationMessage: Message = {\r\n          id: `msg_${Date.now()}`,\r\n          sender: 'bot',\r\n          text: `I'm escalating your issue to ${response.escalationType} support. Please stand by until they connect with you.`,\r\n          timestamp: new Date(),\r\n        };\r\n\r\n        setTimeout(() => {\r\n          setMessages((prev) => [...prev, escalationMessage]);\r\n        }, 1000);\r\n      }\r\n    } catch (err) {\r\n      const errorMessage = err instanceof Error ? err.message : 'Failed to send message';\r\n      setError(errorMessage);\r\n      console.error('Message send error:', err);\r\n\r\n      const errorBotMessage: Message = {\r\n        id: `msg_${Date.now()}`,\r\n        sender: 'bot',\r\n        text: 'Sorry, I encountered an error. Let me connect you with support.',\r\n        timestamp: new Date(),\r\n      };\r\n\r\n      setMessages((prev) => [...prev, errorBotMessage]);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleQuickAction = async (action: string) => {\r\n    if (!conversationId) {\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const response = await apiService.current.sendQuickAction(\r\n        conversationId,\r\n        bookingId,\r\n        userId,\r\n        action\r\n      );\r\n\r\n      // Add action as user message\r\n      const userMessage: Message = {\r\n        id: `msg_${Date.now()}`,\r\n        sender: 'user',\r\n        text: formatActionLabel(action),\r\n        timestamp: new Date(),\r\n      };\r\n\r\n      setMessages((prev) => [...prev, userMessage]);\r\n\r\n      // Add bot response\r\n      const botMessage: Message = {\r\n        id: `msg_${Date.now()}`,\r\n        sender: 'bot',\r\n        text: response.message,\r\n        timestamp: new Date(),\r\n        metadata: {\r\n          ...response.metadata,\r\n          source: 'api',\r\n          endpoint: '/api/chatbot/quick-action',\r\n        },\r\n      };\r\n\r\n      setMessages((prev) => [...prev, botMessage]);\r\n\r\n      // Update quick actions\r\n      if (response.suggestedActions) {\r\n        const actions: QuickActionButton[] = response.suggestedActions.map((a: string) => ({\r\n          id: a,\r\n          label: formatActionLabel(a),\r\n          action: a,\r\n        }));\r\n        setQuickActions(actions);\r\n      }\r\n\r\n      // Handle escalation\r\n      if (response.requiresEscalation) {\r\n        setIsEscalated(true);\r\n        setEscalationType(response.escalationType as 'driver' | 'support' | 'safety');\r\n\r\n        if (onEscalation) {\r\n          onEscalation(response.escalationType);\r\n        }\r\n      }\r\n    } catch (err) {\r\n      const errorMessage = err instanceof Error ? err.message : 'Failed to process action';\r\n      setError(errorMessage);\r\n      console.error('Quick action error:', err);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleCloseChat = async () => {\r\n    if (conversationId) {\r\n      try {\r\n        await apiService.current.closeConversation(conversationId, 'User closed chat');\r\n      } catch (err) {\r\n        console.error('Error closing conversation:', err);\r\n      }\r\n    }\r\n\r\n    if (onClose) {\r\n      onClose();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"chatbot-container\">\r\n      <div className=\"chatbot-header\">\r\n        <div className=\"chatbot-header-left\">\r\n          <div className=\"chatbot-header-avatar\">ü§ñ</div>\r\n          <div>\r\n            <h3>RideShare AI</h3>\r\n            <div className=\"chatbot-header-status\">\r\n              <span className=\"online-dot\"></span>\r\n              Online ‚Ä¢ Powered by API\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <button className=\"close-btn\" onClick={handleCloseChat} title=\"Close chat\">\r\n          ‚úï\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"chatbot-messages\">\r\n        {messages.map((message) => (\r\n          <div key={message.id} className={`message message-${message.sender}`}>\r\n            <div className=\"message-content\">\r\n              {message.sender === 'bot' && <span className=\"message-avatar\">ü§ñ</span>}\r\n              {message.sender === 'user' && <span className=\"message-avatar\">üë§</span>}\r\n              {message.sender === 'driver' && <span className=\"message-avatar\">üöó</span>}\r\n              {message.sender === 'support_agent' && <span className=\"message-avatar\">üë®‚Äçüíº</span>}\r\n              <div>\r\n                <div className=\"message-text\">{message.text}</div>\r\n                <span className=\"message-time\">\r\n                  {message.timestamp.toLocaleTimeString([], {\r\n                    hour: '2-digit',\r\n                    minute: '2-digit',\r\n                  })}\r\n                </span>\r\n                {message.sender === 'bot' && message.metadata?.source === 'api' && (\r\n                  <div className=\"message-api-badge\">\r\n                    API Response\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n\r\n        {isLoading && (\r\n          <div className=\"message message-bot\">\r\n            <div className=\"message-content\">\r\n              <span className=\"message-avatar\">ü§ñ</span>\r\n              <div className=\"typing-indicator\">\r\n                <span></span>\r\n                <span></span>\r\n                <span></span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {error && (\r\n          <div className=\"error-message\">\r\n            <strong>‚ö† Error:</strong> {error}\r\n          </div>\r\n        )}\r\n\r\n        <div ref={messagesEndRef} />\r\n      </div>\r\n\r\n      {isEscalated && (\r\n        <div className=\"escalation-notice\">\r\n          <p>\r\n            üîî Your chat has been escalated to {escalationType || 'support'}. They will be with you\r\n            shortly.\r\n          </p>\r\n        </div>\r\n      )}\r\n\r\n      {!isEscalated && (\r\n        <>\r\n          {quickActions.length > 0 && (\r\n            <div className=\"quick-actions\">\r\n              {quickActions.map((action) => (\r\n                <button\r\n                  key={action.id}\r\n                  className=\"quick-action-btn\"\r\n                  onClick={() => handleQuickAction(action.action)}\r\n                  disabled={isLoading}\r\n                >\r\n                  {action.label}\r\n                </button>\r\n              ))}\r\n            </div>\r\n          )}\r\n\r\n          <form onSubmit={handleSendMessage} className=\"chatbot-input-form\">\r\n            <input\r\n              type=\"text\"\r\n              value={inputText}\r\n              onChange={(e) => setInputText(e.target.value)}\r\n              placeholder=\"Ask anything about your ride...\"\r\n              disabled={isLoading || isEscalated}\r\n              className=\"chatbot-input\"\r\n              id=\"chat-input\"\r\n            />\r\n            <button\r\n              type=\"submit\"\r\n              disabled={isLoading || !inputText.trim() || isEscalated}\r\n              className=\"send-btn\"\r\n              id=\"chat-send-btn\"\r\n            >\r\n              ‚û§\r\n            </button>\r\n          </form>\r\n\r\n          <div className=\"chat-powered-by\">\r\n            Responses powered by RideShare API ‚Ä¢ Real-time data\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Chatbot;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}