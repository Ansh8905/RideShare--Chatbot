{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ASUS-PC\\\\Desktop\\\\Projects\\\\RideShare--Chatbot\\\\frontend\\\\src\\\\components\\\\Chatbot.tsx\",\n  _s = $RefreshSig$();\n// ============================================================\n// RideSharePro In-App Chatbot Component\n// BRD-compliant: post-booking chatbot with context awareness,\n// quick actions, free-text NLP, escalation, safety\n// ============================================================\n\nimport React, { useEffect, useState, useRef } from 'react';\nimport ChatbotApiService from '../services/chatbotApi';\nimport '../styles/chatbot.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Chatbot = ({\n  bookingId,\n  userId,\n  driverId,\n  apiUrl,\n  onEscalation,\n  onClose\n}) => {\n  _s();\n  const [conversationId, setConversationId] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [inputText, setInputText] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [isEscalated, setIsEscalated] = useState(false);\n  const [escalationType, setEscalationType] = useState(null);\n  const [quickActions, setQuickActions] = useState([]);\n  const [bookingContext, setBookingContext] = useState(null);\n  const messagesEndRef = useRef(null);\n  const apiService = useRef(new ChatbotApiService(apiUrl));\n\n  // BRD ¬ß5.1: Initialize chatbot immediately after booking confirmation\n  useEffect(() => {\n    initializeChatbot();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [bookingId, userId]);\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n  const scrollToBottom = () => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  };\n\n  // BRD ¬ß5.2: Context-aware greeting with booking details\n  const initializeChatbot = async () => {\n    try {\n      setIsLoading(true);\n      setError(null);\n      const response = await apiService.current.initiateChatbot(bookingId, userId, driverId);\n      setConversationId(response.conversationId);\n\n      // BRD ¬ß5.2: Store booking context\n      if (response.bookingContext) {\n        setBookingContext(response.bookingContext);\n      }\n      const greetingMessage = {\n        id: `msg_${Date.now()}`,\n        sender: 'bot',\n        text: response.message,\n        timestamp: new Date(),\n        metadata: {\n          source: 'api',\n          endpoint: '/api/chatbot/initiate'\n        }\n      };\n      setMessages([greetingMessage]);\n\n      // BRD Epic 3: Quick actions based on booking status\n      updateQuickActions(response.suggestedActions || []);\n    } catch (err) {\n      const errorMessage = err instanceof Error ? err.message : 'Failed to initialize chatbot';\n      setError(errorMessage);\n      console.error('Chatbot initialization error:', err);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const updateQuickActions = actions => {\n    const buttons = actions.map(action => ({\n      id: action,\n      label: formatActionLabel(action),\n      action,\n      icon: getActionIcon(action)\n    }));\n    setQuickActions(buttons);\n  };\n  const formatActionLabel = action => {\n    const labels = {\n      where_is_driver: 'Where is my driver?',\n      driver_late: 'Driver is late',\n      contact_driver: 'Contact driver',\n      cannot_contact_driver: 'Can\\'t reach driver',\n      cancel_booking: 'Cancel booking',\n      talk_to_agent: 'Talk to agent',\n      call_driver: 'Call driver',\n      message_driver: 'Message driver',\n      payment_query: 'Payment info',\n      safety_concern: 'Safety concern',\n      ok_thanks: 'OK, thanks',\n      wait: 'I\\'ll wait',\n      emergency_contact: 'Emergency help',\n      retry: 'Try again'\n    };\n    return labels[action] || action.replace(/_/g, ' ');\n  };\n  const getActionIcon = action => {\n    const icons = {\n      where_is_driver: 'üìç',\n      driver_late: '‚è∞',\n      contact_driver: 'üìû',\n      cannot_contact_driver: '‚ùå',\n      cancel_booking: 'üö´',\n      talk_to_agent: 'üë®‚Äçüíº',\n      call_driver: 'üìû',\n      message_driver: 'üí¨',\n      payment_query: 'üí≥',\n      safety_concern: 'üö®',\n      ok_thanks: '‚úÖ',\n      wait: '‚è≥',\n      emergency_contact: 'üÜò',\n      retry: 'üîÑ'\n    };\n    return icons[action] || 'üí¨';\n  };\n\n  // BRD ¬ß5.4 / Epic 4: Free-text NLP query ‚Äî ALL responses from live API\n  const handleSendMessage = async e => {\n    e.preventDefault();\n    if (!inputText.trim() || !conversationId) return;\n    const messageText = inputText;\n    const userMessage = {\n      id: `msg_${Date.now()}`,\n      sender: 'user',\n      text: messageText,\n      timestamp: new Date()\n    };\n    setMessages(prev => [...prev, userMessage]);\n    setInputText('');\n    setIsLoading(true);\n    setError(null);\n    try {\n      // Call LIVE API endpoint /api/chatbot/message\n      const response = await apiService.current.sendMessage(conversationId, bookingId, userId, messageText);\n      const botMessage = {\n        id: `msg_${Date.now() + 1}`,\n        sender: 'bot',\n        text: response.message,\n        timestamp: new Date(),\n        metadata: {\n          ...response.metadata,\n          source: 'api',\n          endpoint: '/api/chatbot/message'\n        }\n      };\n      setMessages(prev => [...prev, botMessage]);\n\n      // Update quick actions from response\n      if (response.suggestedActions) {\n        updateQuickActions(response.suggestedActions);\n      }\n\n      // Update booking context if provided\n      if (response.bookingContext) {\n        setBookingContext(response.bookingContext);\n      }\n\n      // BRD ¬ß5.5: Handle escalation\n      if (response.requiresEscalation) {\n        handleEscalationUI(response.escalationType);\n      }\n    } catch (err) {\n      const errorMessage = err instanceof Error ? err.message : 'Failed to send message';\n      setError(errorMessage);\n      console.error('Chat API Error:', err);\n      const errorBotMessage = {\n        id: `msg_${Date.now() + 1}`,\n        sender: 'bot',\n        text: '‚ö†Ô∏è Sorry, something went wrong. Please try again.',\n        timestamp: new Date()\n      };\n      setMessages(prev => [...prev, errorBotMessage]);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // BRD ¬ß5.3/Epic 3: Quick action handler (one-tap)\n  const handleQuickAction = async action => {\n    if (!conversationId) return;\n    setIsLoading(true);\n    setError(null);\n    try {\n      const response = await apiService.current.sendQuickAction(conversationId, bookingId, userId, action);\n\n      // Add action as user message\n      const userMessage = {\n        id: `msg_${Date.now()}`,\n        sender: 'user',\n        text: `${getActionIcon(action)} ${formatActionLabel(action)}`,\n        timestamp: new Date()\n      };\n      setMessages(prev => [...prev, userMessage]);\n\n      // Add bot response\n      const botMessage = {\n        id: `msg_${Date.now() + 1}`,\n        sender: 'bot',\n        text: response.message,\n        timestamp: new Date(),\n        metadata: {\n          ...response.metadata,\n          source: 'api',\n          endpoint: '/api/chatbot/quick-action'\n        }\n      };\n      setMessages(prev => [...prev, botMessage]);\n\n      // Update quick actions based on response\n      if (response.suggestedActions) {\n        updateQuickActions(response.suggestedActions);\n      }\n\n      // Update booking context\n      if (response.bookingContext) {\n        setBookingContext(response.bookingContext);\n      }\n\n      // Handle escalation\n      if (response.requiresEscalation) {\n        handleEscalationUI(response.escalationType);\n      }\n    } catch (err) {\n      const errorMessage = err instanceof Error ? err.message : 'Failed to process action';\n      setError(errorMessage);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // BRD ¬ß5.5: Escalation UI handler\n  const handleEscalationUI = type => {\n    setIsEscalated(true);\n    setEscalationType(type);\n    if (onEscalation) {\n      onEscalation(type);\n    }\n  };\n  const handleCloseChat = async () => {\n    if (conversationId) {\n      try {\n        await apiService.current.closeConversation(conversationId, 'User closed chat');\n      } catch (err) {\n        console.error('Error closing conversation:', err);\n      }\n    }\n    if (onClose) {\n      onClose();\n    }\n  };\n  const getStatusBadge = status => {\n    const badges = {\n      confirmed: {\n        label: 'Confirmed',\n        className: 'status-confirmed'\n      },\n      in_progress: {\n        label: 'In Progress',\n        className: 'status-progress'\n      },\n      arrived: {\n        label: 'Arrived',\n        className: 'status-arrived'\n      },\n      completed: {\n        label: 'Completed',\n        className: 'status-completed'\n      },\n      cancelled: {\n        label: 'Cancelled',\n        className: 'status-cancelled'\n      }\n    };\n    return badges[status] || {\n      label: status,\n      className: ''\n    };\n  };\n\n  // Format message text: simple markdown-like formatting\n  const formatMessageText = text => {\n    // Bold: **text** ‚Üí <strong>text</strong>\n    let formatted = text.replace(/\\*\\*(.*?)\\*\\*/g, '<strong>$1</strong>');\n    // Line breaks\n    formatted = formatted.replace(/\\n/g, '<br/>');\n    // Bullet points with ‚Ä¢\n    formatted = formatted.replace(/‚Ä¢ /g, '<span class=\"bullet\">‚Ä¢</span> ');\n    return formatted;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chatbot-container\",\n    id: \"chatbot-widget\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chatbot-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chatbot-header-left\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chatbot-header-avatar\",\n          children: \"\\uD83E\\uDD16\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 319,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"RideSharePro Assistant\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 321,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"chatbot-header-status\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"online-dot\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 323,\n              columnNumber: 15\n            }, this), isEscalated ? `Escalated to ${escalationType}` : 'Online ‚Ä¢ Here to help']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 322,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"close-btn\",\n        onClick: handleCloseChat,\n        title: \"Close chat\",\n        id: \"close-chat-btn\",\n        children: \"\\u2715\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 7\n    }, this), bookingContext && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"booking-context-bar\",\n      id: \"booking-context\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"context-row\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"context-label\",\n          children: \"\\uD83D\\uDE97 Ride\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 339,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: `context-status ${getStatusBadge(bookingContext.status).className}`,\n          children: getStatusBadge(bookingContext.status).label\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 340,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 338,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"context-row\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"context-detail\",\n          children: [\"\\uD83D\\uDC64 \", bookingContext.driverName, \" \\u2022 \", bookingContext.driverVehicle]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 344,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"context-row\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"context-detail\",\n          children: [\"\\u23F1\\uFE0F ETA: \", bookingContext.eta, \" min \\u2022 \\uD83D\\uDCB0 \", bookingContext.estimatedFare]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"context-route\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"\\uD83D\\uDCCD \", bookingContext.pickup]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"route-arrow\",\n          children: \"\\u2192\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 356,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"\\uD83C\\uDFC1 \", bookingContext.dropoff]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 354,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 337,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chatbot-messages\",\n      id: \"chat-messages\",\n      children: [messages.map(message => {\n        var _message$metadata, _message$metadata2, _message$metadata3;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `message message-${message.sender}`,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"message-content\",\n            children: [message.sender === 'bot' && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"message-avatar\",\n              children: \"\\uD83E\\uDD16\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 367,\n              columnNumber: 44\n            }, this), message.sender === 'user' && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"message-avatar\",\n              children: \"\\uD83D\\uDC64\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 368,\n              columnNumber: 45\n            }, this), message.sender === 'driver' && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"message-avatar\",\n              children: \"\\uD83D\\uDE97\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 369,\n              columnNumber: 47\n            }, this), message.sender === 'support_agent' && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"message-avatar\",\n              children: \"\\uD83D\\uDC68\\u200D\\uD83D\\uDCBC\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 370,\n              columnNumber: 54\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"message-body\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"message-text\",\n                dangerouslySetInnerHTML: {\n                  __html: formatMessageText(message.text)\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 372,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"message-footer\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"message-time\",\n                  children: message.timestamp.toLocaleTimeString([], {\n                    hour: '2-digit',\n                    minute: '2-digit'\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 377,\n                  columnNumber: 19\n                }, this), message.sender === 'bot' && ((_message$metadata = message.metadata) === null || _message$metadata === void 0 ? void 0 : _message$metadata.source) === 'api' && /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"message-api-badge\",\n                  children: [\"\\u26A1 API \", (_message$metadata2 = message.metadata) !== null && _message$metadata2 !== void 0 && _message$metadata2.responseTimeMs ? `${message.metadata.responseTimeMs}ms` : '']\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 384,\n                  columnNumber: 21\n                }, this), ((_message$metadata3 = message.metadata) === null || _message$metadata3 === void 0 ? void 0 : _message$metadata3.intent) && message.metadata.intent !== 'error' && /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"message-intent-badge\",\n                  children: message.metadata.intent.replace(/_/g, ' ')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 389,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 376,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 371,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 366,\n            columnNumber: 13\n          }, this)\n        }, message.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 365,\n          columnNumber: 11\n        }, this);\n      }), isLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"message message-bot\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"message-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"message-avatar\",\n            children: \"\\uD83E\\uDD16\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 403,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"typing-indicator\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 405,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 406,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 407,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 404,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 402,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 401,\n        columnNumber: 11\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-message\",\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"\\u26A0\\uFE0F Error:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 416,\n          columnNumber: 13\n        }, this), \" \", error, /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"retry-btn\",\n          onClick: initializeChatbot,\n          children: \"Retry\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 417,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 415,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: messagesEndRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 421,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 363,\n      columnNumber: 7\n    }, this), isEscalated && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `escalation-notice escalation-${escalationType}`,\n      children: escalationType === 'safety' ? /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"\\uD83D\\uDEA8 \", /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Safety Alert:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 429,\n          columnNumber: 18\n        }, this), \" Your issue has been escalated with CRITICAL priority. Emergency support is being dispatched. Call \", /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"911\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 430,\n          columnNumber: 59\n        }, this), \" if in immediate danger.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 428,\n        columnNumber: 13\n      }, this) : escalationType === 'driver' ? /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"\\uD83D\\uDD14 \", /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Connected to Driver:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 434,\n          columnNumber: 18\n        }, this), \" Your chat history has been shared. The driver will respond shortly.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 433,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"\\uD83D\\uDC68\\u200D\\uD83D\\uDCBC \", /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Support Connected:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 439,\n          columnNumber: 21\n        }, this), \" A human agent is reviewing your chat history and booking details. They will be with you shortly.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 438,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 426,\n      columnNumber: 9\n    }, this), !isEscalated && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [quickActions.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"quick-actions\",\n        id: \"quick-actions\",\n        children: quickActions.map(action => /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `quick-action-btn ${action.action === 'safety_concern' || action.action === 'emergency_contact' ? 'btn-danger' : ''}`,\n          onClick: () => handleQuickAction(action.action),\n          disabled: isLoading,\n          id: `qa-${action.id}`,\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"qa-icon\",\n            children: action.icon\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 459,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"qa-label\",\n            children: action.label\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 460,\n            columnNumber: 19\n          }, this)]\n        }, action.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 452,\n          columnNumber: 17\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 450,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSendMessage,\n        className: \"chatbot-input-form\",\n        id: \"chat-form\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: inputText,\n          onChange: e => setInputText(e.target.value),\n          placeholder: \"Type your question about this ride...\",\n          disabled: isLoading || isEscalated,\n          className: \"chatbot-input\",\n          id: \"chat-input\",\n          autoComplete: \"off\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 468,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          disabled: isLoading || !inputText.trim() || isEscalated,\n          className: \"send-btn\",\n          id: \"chat-send-btn\",\n          children: \"\\u27A4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 478,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 467,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-powered-by\",\n        children: \"Responses powered by RideSharePro API \\u2022 Real-time data\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 488,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 315,\n    columnNumber: 5\n  }, this);\n};\n_s(Chatbot, \"TlpuoOz868sVcDRH3SlXqzPivlw=\");\n_c = Chatbot;\nexport default Chatbot;\nvar _c;\n$RefreshReg$(_c, \"Chatbot\");","map":{"version":3,"names":["React","useEffect","useState","useRef","ChatbotApiService","jsxDEV","_jsxDEV","Fragment","_Fragment","Chatbot","bookingId","userId","driverId","apiUrl","onEscalation","onClose","_s","conversationId","setConversationId","messages","setMessages","inputText","setInputText","isLoading","setIsLoading","error","setError","isEscalated","setIsEscalated","escalationType","setEscalationType","quickActions","setQuickActions","bookingContext","setBookingContext","messagesEndRef","apiService","initializeChatbot","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","response","initiateChatbot","greetingMessage","id","Date","now","sender","text","message","timestamp","metadata","source","endpoint","updateQuickActions","suggestedActions","err","errorMessage","Error","console","actions","buttons","map","action","label","formatActionLabel","icon","getActionIcon","labels","where_is_driver","driver_late","contact_driver","cannot_contact_driver","cancel_booking","talk_to_agent","call_driver","message_driver","payment_query","safety_concern","ok_thanks","wait","emergency_contact","retry","replace","icons","handleSendMessage","e","preventDefault","trim","messageText","userMessage","prev","sendMessage","botMessage","requiresEscalation","handleEscalationUI","errorBotMessage","handleQuickAction","sendQuickAction","type","handleCloseChat","closeConversation","getStatusBadge","status","badges","confirmed","className","in_progress","arrived","completed","cancelled","formatMessageText","formatted","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","title","driverName","driverVehicle","eta","estimatedFare","pickup","dropoff","_message$metadata","_message$metadata2","_message$metadata3","dangerouslySetInnerHTML","__html","toLocaleTimeString","hour","minute","responseTimeMs","intent","ref","length","disabled","onSubmit","value","onChange","target","placeholder","autoComplete","_c","$RefreshReg$"],"sources":["C:/Users/ASUS-PC/Desktop/Projects/RideShare--Chatbot/frontend/src/components/Chatbot.tsx"],"sourcesContent":["// ============================================================\r\n// RideSharePro In-App Chatbot Component\r\n// BRD-compliant: post-booking chatbot with context awareness,\r\n// quick actions, free-text NLP, escalation, safety\r\n// ============================================================\r\n\r\nimport React, { useEffect, useState, useRef } from 'react';\r\nimport ChatbotApiService from '../services/chatbotApi';\r\nimport { ChatbotProps, Message, QuickActionButton, BookingContext } from '../types';\r\nimport '../styles/chatbot.css';\r\n\r\nconst Chatbot: React.FC<ChatbotProps> = ({\r\n  bookingId,\r\n  userId,\r\n  driverId,\r\n  apiUrl,\r\n  onEscalation,\r\n  onClose,\r\n}) => {\r\n  const [conversationId, setConversationId] = useState<string | null>(null);\r\n  const [messages, setMessages] = useState<Message[]>([]);\r\n  const [inputText, setInputText] = useState('');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [isEscalated, setIsEscalated] = useState(false);\r\n  const [escalationType, setEscalationType] = useState<'driver' | 'support' | 'safety' | null>(null);\r\n  const [quickActions, setQuickActions] = useState<QuickActionButton[]>([]);\r\n  const [bookingContext, setBookingContext] = useState<BookingContext | null>(null);\r\n  const messagesEndRef = useRef<HTMLDivElement>(null);\r\n  const apiService = useRef(new ChatbotApiService(apiUrl));\r\n\r\n  // BRD ¬ß5.1: Initialize chatbot immediately after booking confirmation\r\n  useEffect(() => {\r\n    initializeChatbot();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [bookingId, userId]);\r\n\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [messages]);\r\n\r\n  const scrollToBottom = () => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  };\r\n\r\n  // BRD ¬ß5.2: Context-aware greeting with booking details\r\n  const initializeChatbot = async () => {\r\n    try {\r\n      setIsLoading(true);\r\n      setError(null);\r\n\r\n      const response = await apiService.current.initiateChatbot(bookingId, userId, driverId);\r\n\r\n      setConversationId(response.conversationId);\r\n\r\n      // BRD ¬ß5.2: Store booking context\r\n      if (response.bookingContext) {\r\n        setBookingContext(response.bookingContext);\r\n      }\r\n\r\n      const greetingMessage: Message = {\r\n        id: `msg_${Date.now()}`,\r\n        sender: 'bot',\r\n        text: response.message,\r\n        timestamp: new Date(),\r\n        metadata: { source: 'api', endpoint: '/api/chatbot/initiate' },\r\n      };\r\n\r\n      setMessages([greetingMessage]);\r\n\r\n      // BRD Epic 3: Quick actions based on booking status\r\n      updateQuickActions(response.suggestedActions || []);\r\n    } catch (err) {\r\n      const errorMessage = err instanceof Error ? err.message : 'Failed to initialize chatbot';\r\n      setError(errorMessage);\r\n      console.error('Chatbot initialization error:', err);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const updateQuickActions = (actions: string[]) => {\r\n    const buttons: QuickActionButton[] = actions.map((action: string) => ({\r\n      id: action,\r\n      label: formatActionLabel(action),\r\n      action,\r\n      icon: getActionIcon(action),\r\n    }));\r\n    setQuickActions(buttons);\r\n  };\r\n\r\n  const formatActionLabel = (action: string): string => {\r\n    const labels: Record<string, string> = {\r\n      where_is_driver: 'Where is my driver?',\r\n      driver_late: 'Driver is late',\r\n      contact_driver: 'Contact driver',\r\n      cannot_contact_driver: 'Can\\'t reach driver',\r\n      cancel_booking: 'Cancel booking',\r\n      talk_to_agent: 'Talk to agent',\r\n      call_driver: 'Call driver',\r\n      message_driver: 'Message driver',\r\n      payment_query: 'Payment info',\r\n      safety_concern: 'Safety concern',\r\n      ok_thanks: 'OK, thanks',\r\n      wait: 'I\\'ll wait',\r\n      emergency_contact: 'Emergency help',\r\n      retry: 'Try again',\r\n    };\r\n    return labels[action] || action.replace(/_/g, ' ');\r\n  };\r\n\r\n  const getActionIcon = (action: string): string => {\r\n    const icons: Record<string, string> = {\r\n      where_is_driver: 'üìç',\r\n      driver_late: '‚è∞',\r\n      contact_driver: 'üìû',\r\n      cannot_contact_driver: '‚ùå',\r\n      cancel_booking: 'üö´',\r\n      talk_to_agent: 'üë®‚Äçüíº',\r\n      call_driver: 'üìû',\r\n      message_driver: 'üí¨',\r\n      payment_query: 'üí≥',\r\n      safety_concern: 'üö®',\r\n      ok_thanks: '‚úÖ',\r\n      wait: '‚è≥',\r\n      emergency_contact: 'üÜò',\r\n      retry: 'üîÑ',\r\n    };\r\n    return icons[action] || 'üí¨';\r\n  };\r\n\r\n  // BRD ¬ß5.4 / Epic 4: Free-text NLP query ‚Äî ALL responses from live API\r\n  const handleSendMessage = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n\r\n    if (!inputText.trim() || !conversationId) return;\r\n\r\n    const messageText = inputText;\r\n\r\n    const userMessage: Message = {\r\n      id: `msg_${Date.now()}`,\r\n      sender: 'user',\r\n      text: messageText,\r\n      timestamp: new Date(),\r\n    };\r\n\r\n    setMessages((prev) => [...prev, userMessage]);\r\n    setInputText('');\r\n    setIsLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      // Call LIVE API endpoint /api/chatbot/message\r\n      const response = await apiService.current.sendMessage(\r\n        conversationId,\r\n        bookingId,\r\n        userId,\r\n        messageText\r\n      );\r\n\r\n      const botMessage: Message = {\r\n        id: `msg_${Date.now() + 1}`,\r\n        sender: 'bot',\r\n        text: response.message,\r\n        timestamp: new Date(),\r\n        metadata: {\r\n          ...response.metadata,\r\n          source: 'api',\r\n          endpoint: '/api/chatbot/message',\r\n        },\r\n      };\r\n\r\n      setMessages((prev) => [...prev, botMessage]);\r\n\r\n      // Update quick actions from response\r\n      if (response.suggestedActions) {\r\n        updateQuickActions(response.suggestedActions);\r\n      }\r\n\r\n      // Update booking context if provided\r\n      if (response.bookingContext) {\r\n        setBookingContext(response.bookingContext);\r\n      }\r\n\r\n      // BRD ¬ß5.5: Handle escalation\r\n      if (response.requiresEscalation) {\r\n        handleEscalationUI(response.escalationType);\r\n      }\r\n    } catch (err) {\r\n      const errorMessage = err instanceof Error ? err.message : 'Failed to send message';\r\n      setError(errorMessage);\r\n      console.error('Chat API Error:', err);\r\n\r\n      const errorBotMessage: Message = {\r\n        id: `msg_${Date.now() + 1}`,\r\n        sender: 'bot',\r\n        text: '‚ö†Ô∏è Sorry, something went wrong. Please try again.',\r\n        timestamp: new Date(),\r\n      };\r\n\r\n      setMessages((prev) => [...prev, errorBotMessage]);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  // BRD ¬ß5.3/Epic 3: Quick action handler (one-tap)\r\n  const handleQuickAction = async (action: string) => {\r\n    if (!conversationId) return;\r\n\r\n    setIsLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const response = await apiService.current.sendQuickAction(\r\n        conversationId,\r\n        bookingId,\r\n        userId,\r\n        action\r\n      );\r\n\r\n      // Add action as user message\r\n      const userMessage: Message = {\r\n        id: `msg_${Date.now()}`,\r\n        sender: 'user',\r\n        text: `${getActionIcon(action)} ${formatActionLabel(action)}`,\r\n        timestamp: new Date(),\r\n      };\r\n\r\n      setMessages((prev) => [...prev, userMessage]);\r\n\r\n      // Add bot response\r\n      const botMessage: Message = {\r\n        id: `msg_${Date.now() + 1}`,\r\n        sender: 'bot',\r\n        text: response.message,\r\n        timestamp: new Date(),\r\n        metadata: {\r\n          ...response.metadata,\r\n          source: 'api',\r\n          endpoint: '/api/chatbot/quick-action',\r\n        },\r\n      };\r\n\r\n      setMessages((prev) => [...prev, botMessage]);\r\n\r\n      // Update quick actions based on response\r\n      if (response.suggestedActions) {\r\n        updateQuickActions(response.suggestedActions);\r\n      }\r\n\r\n      // Update booking context\r\n      if (response.bookingContext) {\r\n        setBookingContext(response.bookingContext);\r\n      }\r\n\r\n      // Handle escalation\r\n      if (response.requiresEscalation) {\r\n        handleEscalationUI(response.escalationType);\r\n      }\r\n    } catch (err) {\r\n      const errorMessage = err instanceof Error ? err.message : 'Failed to process action';\r\n      setError(errorMessage);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  // BRD ¬ß5.5: Escalation UI handler\r\n  const handleEscalationUI = (type: string) => {\r\n    setIsEscalated(true);\r\n    setEscalationType(type as 'driver' | 'support' | 'safety');\r\n\r\n    if (onEscalation) {\r\n      onEscalation(type);\r\n    }\r\n  };\r\n\r\n  const handleCloseChat = async () => {\r\n    if (conversationId) {\r\n      try {\r\n        await apiService.current.closeConversation(conversationId, 'User closed chat');\r\n      } catch (err) {\r\n        console.error('Error closing conversation:', err);\r\n      }\r\n    }\r\n    if (onClose) {\r\n      onClose();\r\n    }\r\n  };\r\n\r\n  const getStatusBadge = (status: string) => {\r\n    const badges: Record<string, { label: string; className: string }> = {\r\n      confirmed: { label: 'Confirmed', className: 'status-confirmed' },\r\n      in_progress: { label: 'In Progress', className: 'status-progress' },\r\n      arrived: { label: 'Arrived', className: 'status-arrived' },\r\n      completed: { label: 'Completed', className: 'status-completed' },\r\n      cancelled: { label: 'Cancelled', className: 'status-cancelled' },\r\n    };\r\n    return badges[status] || { label: status, className: '' };\r\n  };\r\n\r\n  // Format message text: simple markdown-like formatting\r\n  const formatMessageText = (text: string) => {\r\n    // Bold: **text** ‚Üí <strong>text</strong>\r\n    let formatted = text.replace(/\\*\\*(.*?)\\*\\*/g, '<strong>$1</strong>');\r\n    // Line breaks\r\n    formatted = formatted.replace(/\\n/g, '<br/>');\r\n    // Bullet points with ‚Ä¢\r\n    formatted = formatted.replace(/‚Ä¢ /g, '<span class=\"bullet\">‚Ä¢</span> ');\r\n    return formatted;\r\n  };\r\n\r\n  return (\r\n    <div className=\"chatbot-container\" id=\"chatbot-widget\">\r\n      {/* ‚îÄ‚îÄ BRD: Chatbot Header ‚îÄ‚îÄ */}\r\n      <div className=\"chatbot-header\">\r\n        <div className=\"chatbot-header-left\">\r\n          <div className=\"chatbot-header-avatar\">ü§ñ</div>\r\n          <div>\r\n            <h3>RideSharePro Assistant</h3>\r\n            <div className=\"chatbot-header-status\">\r\n              <span className=\"online-dot\"></span>\r\n              {isEscalated\r\n                ? `Escalated to ${escalationType}`\r\n                : 'Online ‚Ä¢ Here to help'}\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <button className=\"close-btn\" onClick={handleCloseChat} title=\"Close chat\" id=\"close-chat-btn\">\r\n          ‚úï\r\n        </button>\r\n      </div>\r\n\r\n      {/* ‚îÄ‚îÄ BRD ¬ß5.2: Booking Context Bar ‚îÄ‚îÄ */}\r\n      {bookingContext && (\r\n        <div className=\"booking-context-bar\" id=\"booking-context\">\r\n          <div className=\"context-row\">\r\n            <span className=\"context-label\">üöó Ride</span>\r\n            <span className={`context-status ${getStatusBadge(bookingContext.status).className}`}>\r\n              {getStatusBadge(bookingContext.status).label}\r\n            </span>\r\n          </div>\r\n          <div className=\"context-row\">\r\n            <span className=\"context-detail\">\r\n              üë§ {bookingContext.driverName} ‚Ä¢ {bookingContext.driverVehicle}\r\n            </span>\r\n          </div>\r\n          <div className=\"context-row\">\r\n            <span className=\"context-detail\">\r\n              ‚è±Ô∏è ETA: {bookingContext.eta} min ‚Ä¢ üí∞ {bookingContext.estimatedFare}\r\n            </span>\r\n          </div>\r\n          <div className=\"context-route\">\r\n            <span>üìç {bookingContext.pickup}</span>\r\n            <span className=\"route-arrow\">‚Üí</span>\r\n            <span>üèÅ {bookingContext.dropoff}</span>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* ‚îÄ‚îÄ Messages Area ‚îÄ‚îÄ */}\r\n      <div className=\"chatbot-messages\" id=\"chat-messages\">\r\n        {messages.map((message) => (\r\n          <div key={message.id} className={`message message-${message.sender}`}>\r\n            <div className=\"message-content\">\r\n              {message.sender === 'bot' && <span className=\"message-avatar\">ü§ñ</span>}\r\n              {message.sender === 'user' && <span className=\"message-avatar\">üë§</span>}\r\n              {message.sender === 'driver' && <span className=\"message-avatar\">üöó</span>}\r\n              {message.sender === 'support_agent' && <span className=\"message-avatar\">üë®‚Äçüíº</span>}\r\n              <div className=\"message-body\">\r\n                <div\r\n                  className=\"message-text\"\r\n                  dangerouslySetInnerHTML={{ __html: formatMessageText(message.text) }}\r\n                />\r\n                <div className=\"message-footer\">\r\n                  <span className=\"message-time\">\r\n                    {message.timestamp.toLocaleTimeString([], {\r\n                      hour: '2-digit',\r\n                      minute: '2-digit',\r\n                    })}\r\n                  </span>\r\n                  {message.sender === 'bot' && message.metadata?.source === 'api' && (\r\n                    <span className=\"message-api-badge\">\r\n                      ‚ö° API {message.metadata?.responseTimeMs ? `${message.metadata.responseTimeMs}ms` : ''}\r\n                    </span>\r\n                  )}\r\n                  {message.metadata?.intent && message.metadata.intent !== 'error' && (\r\n                    <span className=\"message-intent-badge\">\r\n                      {message.metadata.intent.replace(/_/g, ' ')}\r\n                    </span>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n\r\n        {/* Typing indicator */}\r\n        {isLoading && (\r\n          <div className=\"message message-bot\">\r\n            <div className=\"message-content\">\r\n              <span className=\"message-avatar\">ü§ñ</span>\r\n              <div className=\"typing-indicator\">\r\n                <span></span>\r\n                <span></span>\r\n                <span></span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Error display */}\r\n        {error && (\r\n          <div className=\"error-message\">\r\n            <strong>‚ö†Ô∏è Error:</strong> {error}\r\n            <button className=\"retry-btn\" onClick={initializeChatbot}>Retry</button>\r\n          </div>\r\n        )}\r\n\r\n        <div ref={messagesEndRef} />\r\n      </div>\r\n\r\n      {/* ‚îÄ‚îÄ BRD ¬ß5.5: Escalation Notice ‚îÄ‚îÄ */}\r\n      {isEscalated && (\r\n        <div className={`escalation-notice escalation-${escalationType}`}>\r\n          {escalationType === 'safety' ? (\r\n            <p>\r\n              üö® <strong>Safety Alert:</strong> Your issue has been escalated with CRITICAL priority.\r\n              Emergency support is being dispatched. Call <strong>911</strong> if in immediate danger.\r\n            </p>\r\n          ) : escalationType === 'driver' ? (\r\n            <p>\r\n              üîî <strong>Connected to Driver:</strong> Your chat history has been shared.\r\n              The driver will respond shortly.\r\n            </p>\r\n          ) : (\r\n            <p>\r\n              üë®‚Äçüíº <strong>Support Connected:</strong> A human agent is reviewing your chat\r\n              history and booking details. They will be with you shortly.\r\n            </p>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* ‚îÄ‚îÄ BRD ¬ß5.3/Epic 3: Quick Action Buttons ‚îÄ‚îÄ */}\r\n      {!isEscalated && (\r\n        <>\r\n          {quickActions.length > 0 && (\r\n            <div className=\"quick-actions\" id=\"quick-actions\">\r\n              {quickActions.map((action) => (\r\n                <button\r\n                  key={action.id}\r\n                  className={`quick-action-btn ${action.action === 'safety_concern' || action.action === 'emergency_contact' ? 'btn-danger' : ''}`}\r\n                  onClick={() => handleQuickAction(action.action)}\r\n                  disabled={isLoading}\r\n                  id={`qa-${action.id}`}\r\n                >\r\n                  <span className=\"qa-icon\">{action.icon}</span>\r\n                  <span className=\"qa-label\">{action.label}</span>\r\n                </button>\r\n              ))}\r\n            </div>\r\n          )}\r\n\r\n          {/* ‚îÄ‚îÄ BRD ¬ß5.4/Epic 4: Free-text input ‚îÄ‚îÄ */}\r\n          <form onSubmit={handleSendMessage} className=\"chatbot-input-form\" id=\"chat-form\">\r\n            <input\r\n              type=\"text\"\r\n              value={inputText}\r\n              onChange={(e) => setInputText(e.target.value)}\r\n              placeholder=\"Type your question about this ride...\"\r\n              disabled={isLoading || isEscalated}\r\n              className=\"chatbot-input\"\r\n              id=\"chat-input\"\r\n              autoComplete=\"off\"\r\n            />\r\n            <button\r\n              type=\"submit\"\r\n              disabled={isLoading || !inputText.trim() || isEscalated}\r\n              className=\"send-btn\"\r\n              id=\"chat-send-btn\"\r\n            >\r\n              ‚û§\r\n            </button>\r\n          </form>\r\n\r\n          <div className=\"chat-powered-by\">\r\n            Responses powered by RideSharePro API ‚Ä¢ Real-time data\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Chatbot;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}