{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useCallback } from 'react';\nimport ChatService from '../chat_service/api';\nexport const useChatController = userId => {\n  _s();\n  const [messages, setMessages] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const sendMessage = useCallback(async text => {\n    if (!text.trim()) return;\n    const userMsg = {\n      id: Date.now().toString(),\n      text,\n      sender: 'user',\n      timestamp: new Date()\n    };\n    setMessages(prev => [...prev, userMsg]);\n    setIsLoading(true);\n    setError(null);\n    try {\n      const response = await ChatService.sendMessage(userId, text);\n      const botMsg = {\n        id: (Date.now() + 1).toString(),\n        text: response.reply,\n        sender: 'bot',\n        timestamp: new Date(response.timestamp || Date.now()),\n        intent: response.intent\n      };\n      setMessages(prev => [...prev, botMsg]);\n    } catch (err) {\n      setError('Failed to send message. Please try again.');\n      // Optional: Add a visual error message to the chat\n      const errorMsg = {\n        id: (Date.now() + 2).toString(),\n        text: '⚠️ Network error. Please check your connection.',\n        sender: 'bot',\n        timestamp: new Date()\n      };\n      setMessages(prev => [...prev, errorMsg]);\n    } finally {\n      setIsLoading(false);\n    }\n  }, [userId]);\n  return {\n    messages,\n    isLoading,\n    error,\n    sendMessage\n  };\n};\n_s(useChatController, \"RGFo6fwXwE7lDS/vVgNl/nnr8d4=\");","map":{"version":3,"names":["useState","useCallback","ChatService","useChatController","userId","_s","messages","setMessages","isLoading","setIsLoading","error","setError","sendMessage","text","trim","userMsg","id","Date","now","toString","sender","timestamp","prev","response","botMsg","reply","intent","err","errorMsg"],"sources":["C:/Users/ASUS-PC/Desktop/Projects/RideShare--Chatbot/frontend/src/features/chat/chat_controller/useChatController.ts"],"sourcesContent":["import { useState, useCallback, useRef } from 'react';\r\nimport { ChatMessage } from '../chat_model/types';\r\nimport ChatService from '../chat_service/api';\r\n\r\nexport const useChatController = (userId: string) => {\r\n    const [messages, setMessages] = useState<ChatMessage[]>([]);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    const sendMessage = useCallback(async (text: string) => {\r\n        if (!text.trim()) return;\r\n\r\n        const userMsg: ChatMessage = {\r\n            id: Date.now().toString(),\r\n            text,\r\n            sender: 'user',\r\n            timestamp: new Date(),\r\n        };\r\n\r\n        setMessages((prev) => [...prev, userMsg]);\r\n        setIsLoading(true);\r\n        setError(null);\r\n\r\n        try {\r\n            const response = await ChatService.sendMessage(userId, text);\r\n            const botMsg: ChatMessage = {\r\n                id: (Date.now() + 1).toString(),\r\n                text: response.reply,\r\n                sender: 'bot',\r\n                timestamp: new Date(response.timestamp || Date.now()),\r\n                intent: response.intent,\r\n            };\r\n            setMessages((prev) => [...prev, botMsg]);\r\n        } catch (err) {\r\n            setError('Failed to send message. Please try again.');\r\n            // Optional: Add a visual error message to the chat\r\n            const errorMsg: ChatMessage = {\r\n                id: (Date.now() + 2).toString(),\r\n                text: '⚠️ Network error. Please check your connection.',\r\n                sender: 'bot',\r\n                timestamp: new Date(),\r\n            };\r\n            setMessages((prev) => [...prev, errorMsg]);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    }, [userId]);\r\n\r\n    return {\r\n        messages,\r\n        isLoading,\r\n        error,\r\n        sendMessage,\r\n    };\r\n};\r\n"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,WAAW,QAAgB,OAAO;AAErD,OAAOC,WAAW,MAAM,qBAAqB;AAE7C,OAAO,MAAMC,iBAAiB,GAAIC,MAAc,IAAK;EAAAC,EAAA;EACjD,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGP,QAAQ,CAAgB,EAAE,CAAC;EAC3D,MAAM,CAACQ,SAAS,EAAEC,YAAY,CAAC,GAAGT,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM,CAACU,KAAK,EAAEC,QAAQ,CAAC,GAAGX,QAAQ,CAAgB,IAAI,CAAC;EAEvD,MAAMY,WAAW,GAAGX,WAAW,CAAC,MAAOY,IAAY,IAAK;IACpD,IAAI,CAACA,IAAI,CAACC,IAAI,CAAC,CAAC,EAAE;IAElB,MAAMC,OAAoB,GAAG;MACzBC,EAAE,EAAEC,IAAI,CAACC,GAAG,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC;MACzBN,IAAI;MACJO,MAAM,EAAE,MAAM;MACdC,SAAS,EAAE,IAAIJ,IAAI,CAAC;IACxB,CAAC;IAEDV,WAAW,CAAEe,IAAI,IAAK,CAAC,GAAGA,IAAI,EAAEP,OAAO,CAAC,CAAC;IACzCN,YAAY,CAAC,IAAI,CAAC;IAClBE,QAAQ,CAAC,IAAI,CAAC;IAEd,IAAI;MACA,MAAMY,QAAQ,GAAG,MAAMrB,WAAW,CAACU,WAAW,CAACR,MAAM,EAAES,IAAI,CAAC;MAC5D,MAAMW,MAAmB,GAAG;QACxBR,EAAE,EAAE,CAACC,IAAI,CAACC,GAAG,CAAC,CAAC,GAAG,CAAC,EAAEC,QAAQ,CAAC,CAAC;QAC/BN,IAAI,EAAEU,QAAQ,CAACE,KAAK;QACpBL,MAAM,EAAE,KAAK;QACbC,SAAS,EAAE,IAAIJ,IAAI,CAACM,QAAQ,CAACF,SAAS,IAAIJ,IAAI,CAACC,GAAG,CAAC,CAAC,CAAC;QACrDQ,MAAM,EAAEH,QAAQ,CAACG;MACrB,CAAC;MACDnB,WAAW,CAAEe,IAAI,IAAK,CAAC,GAAGA,IAAI,EAAEE,MAAM,CAAC,CAAC;IAC5C,CAAC,CAAC,OAAOG,GAAG,EAAE;MACVhB,QAAQ,CAAC,2CAA2C,CAAC;MACrD;MACA,MAAMiB,QAAqB,GAAG;QAC1BZ,EAAE,EAAE,CAACC,IAAI,CAACC,GAAG,CAAC,CAAC,GAAG,CAAC,EAAEC,QAAQ,CAAC,CAAC;QAC/BN,IAAI,EAAE,iDAAiD;QACvDO,MAAM,EAAE,KAAK;QACbC,SAAS,EAAE,IAAIJ,IAAI,CAAC;MACxB,CAAC;MACDV,WAAW,CAAEe,IAAI,IAAK,CAAC,GAAGA,IAAI,EAAEM,QAAQ,CAAC,CAAC;IAC9C,CAAC,SAAS;MACNnB,YAAY,CAAC,KAAK,CAAC;IACvB;EACJ,CAAC,EAAE,CAACL,MAAM,CAAC,CAAC;EAEZ,OAAO;IACHE,QAAQ;IACRE,SAAS;IACTE,KAAK;IACLE;EACJ,CAAC;AACL,CAAC;AAACP,EAAA,CAlDWF,iBAAiB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}