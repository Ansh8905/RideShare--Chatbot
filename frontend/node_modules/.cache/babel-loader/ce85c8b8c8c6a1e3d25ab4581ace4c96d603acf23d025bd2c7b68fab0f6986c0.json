{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ASUS-PC\\\\Desktop\\\\Projects\\\\RideShare--Chatbot\\\\frontend\\\\src\\\\components\\\\Chatbot.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useRef } from 'react';\nimport ChatbotApiService from '../services/chatbotApi';\nimport '../styles/chatbot.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Chatbot = ({\n  bookingId,\n  userId,\n  driverId,\n  apiUrl,\n  onEscalation,\n  onClose\n}) => {\n  _s();\n  const [conversationId, setConversationId] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [inputText, setInputText] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [isEscalated, setIsEscalated] = useState(false);\n  const [escalationType, setEscalationType] = useState(null);\n  const [quickActions, setQuickActions] = useState([]);\n  const messagesEndRef = useRef(null);\n  const apiService = useRef(new ChatbotApiService(apiUrl));\n\n  // Initialize chatbot on mount\n  useEffect(() => {\n    initializeChatbot();\n  }, [bookingId, userId]);\n\n  // Scroll to bottom when new messages arrive\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n  const scrollToBottom = () => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  };\n  const initializeChatbot = async () => {\n    try {\n      setIsLoading(true);\n      setError(null);\n      const response = await apiService.current.initiateChatbot(bookingId, userId, driverId);\n      setConversationId(response.conversationId);\n\n      // Add greeting message\n      const greetingMessage = {\n        id: `msg_${Date.now()}`,\n        sender: 'bot',\n        text: response.message,\n        timestamp: new Date()\n      };\n      setMessages([greetingMessage]);\n\n      // Set quick actions\n      const actions = (response.suggestedActions || []).map(action => ({\n        id: action,\n        label: formatActionLabel(action),\n        action\n      }));\n      setQuickActions(actions);\n    } catch (err) {\n      const errorMessage = err instanceof Error ? err.message : 'Failed to initialize chatbot';\n      setError(errorMessage);\n      console.error('Chatbot initialization error:', err);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const formatActionLabel = action => {\n    const labels = {\n      where_is_driver: 'üìç Where is my driver?',\n      driver_late: '‚è∞ Driver is late',\n      contact_driver: 'üìû Contact driver',\n      cannot_contact_driver: '‚ùå Cannot reach driver',\n      cancel_booking: 'üö´ Cancel booking',\n      talk_to_agent: 'üë§ Talk to agent',\n      call_driver: 'üìû Call driver',\n      message_driver: 'üí¨ Message driver',\n      payment_query: 'üí≥ Payment question',\n      safety_concern: '‚ö†Ô∏è Safety concern'\n    };\n    return labels[action] || action.replace(/_/g, ' ');\n  };\n  const handleSendMessage = async e => {\n    e.preventDefault();\n    if (!inputText.trim() || !conversationId) {\n      return;\n    }\n\n    // Add user message\n    const userMessage = {\n      id: `msg_${Date.now()}`,\n      sender: 'user',\n      text: inputText,\n      timestamp: new Date()\n    };\n    setMessages(prev => [...prev, userMessage]);\n    setInputText('');\n    setIsLoading(true);\n    setError(null);\n    try {\n      const response = await apiService.current.sendMessage(conversationId, bookingId, userId, inputText);\n\n      // Add bot response\n      const botMessage = {\n        id: `msg_${Date.now()}`,\n        sender: 'bot',\n        text: response.message,\n        timestamp: new Date(),\n        metadata: response.metadata\n      };\n      setMessages(prev => [...prev, botMessage]);\n\n      // Update quick actions\n      if (response.suggestedActions) {\n        const actions = response.suggestedActions.map(action => ({\n          id: action,\n          label: formatActionLabel(action),\n          action\n        }));\n        setQuickActions(actions);\n      }\n\n      // Handle escalation\n      if (response.requiresEscalation) {\n        setIsEscalated(true);\n        setEscalationType(response.escalationType);\n        if (onEscalation) {\n          onEscalation(response.escalationType);\n        }\n        const escalationMessage = {\n          id: `msg_${Date.now()}`,\n          sender: 'bot',\n          text: `I'm escalating your issue to ${response.escalationType} support. Please stand by until they connect with you.`,\n          timestamp: new Date()\n        };\n        setTimeout(() => {\n          setMessages(prev => [...prev, escalationMessage]);\n        }, 1000);\n      }\n    } catch (err) {\n      const errorMessage = err instanceof Error ? err.message : 'Failed to send message';\n      setError(errorMessage);\n      console.error('Message send error:', err);\n      const errorBotMessage = {\n        id: `msg_${Date.now()}`,\n        sender: 'bot',\n        text: 'Sorry, I encountered an error. Let me connect you with support.',\n        timestamp: new Date()\n      };\n      setMessages(prev => [...prev, errorBotMessage]);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const handleQuickAction = async action => {\n    if (!conversationId) {\n      return;\n    }\n    setIsLoading(true);\n    setError(null);\n    try {\n      const response = await apiService.current.sendQuickAction(conversationId, bookingId, userId, action);\n\n      // Add action as user message\n      const userMessage = {\n        id: `msg_${Date.now()}`,\n        sender: 'user',\n        text: formatActionLabel(action),\n        timestamp: new Date()\n      };\n      setMessages(prev => [...prev, userMessage]);\n\n      // Add bot response\n      const botMessage = {\n        id: `msg_${Date.now()}`,\n        sender: 'bot',\n        text: response.message,\n        timestamp: new Date(),\n        metadata: response.metadata\n      };\n      setMessages(prev => [...prev, botMessage]);\n\n      // Update quick actions\n      if (response.suggestedActions) {\n        const actions = response.suggestedActions.map(a => ({\n          id: a,\n          label: formatActionLabel(a),\n          action: a\n        }));\n        setQuickActions(actions);\n      }\n\n      // Handle escalation\n      if (response.requiresEscalation) {\n        setIsEscalated(true);\n        setEscalationType(response.escalationType);\n        if (onEscalation) {\n          onEscalation(response.escalationType);\n        }\n      }\n    } catch (err) {\n      const errorMessage = err instanceof Error ? err.message : 'Failed to process action';\n      setError(errorMessage);\n      console.error('Quick action error:', err);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const handleCloseChat = async () => {\n    if (conversationId) {\n      try {\n        await apiService.current.closeConversation(conversationId, 'User closed chat');\n      } catch (err) {\n        console.error('Error closing conversation:', err);\n      }\n    }\n    if (onClose) {\n      onClose();\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chatbot-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chatbot-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"RideShare Support\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"close-btn\",\n        onClick: handleCloseChat,\n        title: \"Close chat\",\n        children: \"\\u2715\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chatbot-messages\",\n      children: [messages.map(message => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `message message-${message.sender}`,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"message-content\",\n          children: [message.sender === 'bot' && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"message-avatar\",\n            children: \"\\uD83E\\uDD16\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 44\n          }, this), message.sender === 'user' && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"message-avatar\",\n            children: \"\\uD83D\\uDC64\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 45\n          }, this), message.sender === 'driver' && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"message-avatar\",\n            children: \"\\uD83D\\uDE97\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 273,\n            columnNumber: 47\n          }, this), message.sender === 'support_agent' && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"message-avatar\",\n            children: \"\\uD83D\\uDC68\\u200D\\uD83D\\uDCBC\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 274,\n            columnNumber: 54\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"message-text\",\n            children: message.text\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"message-time\",\n            children: message.timestamp.toLocaleTimeString([], {\n              hour: '2-digit',\n              minute: '2-digit'\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 13\n        }, this)\n      }, message.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 11\n      }, this)), isLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"message message-bot\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"message-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"message-avatar\",\n            children: \"\\uD83E\\uDD16\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 289,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"typing-indicator\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 291,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 293,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 290,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 11\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-message\",\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Error:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 13\n        }, this), \" \", error]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: messagesEndRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 7\n    }, this), isEscalated && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"escalation-notice\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"\\uD83D\\uDD14 Your chat has been escalated to \", escalationType || 'support', \". They will be with you shortly.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 9\n    }, this), !isEscalated && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [quickActions.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"quick-actions\",\n        children: quickActions.map(action => /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"quick-action-btn\",\n          onClick: () => handleQuickAction(action.action),\n          disabled: isLoading,\n          children: action.label\n        }, action.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 322,\n          columnNumber: 17\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSendMessage,\n        className: \"chatbot-input-form\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: inputText,\n          onChange: e => setInputText(e.target.value),\n          placeholder: \"Type your question...\",\n          disabled: isLoading || isEscalated,\n          className: \"chatbot-input\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          disabled: isLoading || !inputText.trim() || isEscalated,\n          className: \"send-btn\",\n          children: \"Send\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 259,\n    columnNumber: 5\n  }, this);\n};\n_s(Chatbot, \"XYOU24QxU1lVLzz64WdhcXHrzvM=\");\n_c = Chatbot;\nexport default Chatbot;\nvar _c;\n$RefreshReg$(_c, \"Chatbot\");","map":{"version":3,"names":["React","useEffect","useState","useRef","ChatbotApiService","jsxDEV","_jsxDEV","Fragment","_Fragment","Chatbot","bookingId","userId","driverId","apiUrl","onEscalation","onClose","_s","conversationId","setConversationId","messages","setMessages","inputText","setInputText","isLoading","setIsLoading","error","setError","isEscalated","setIsEscalated","escalationType","setEscalationType","quickActions","setQuickActions","messagesEndRef","apiService","initializeChatbot","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","response","initiateChatbot","greetingMessage","id","Date","now","sender","text","message","timestamp","actions","suggestedActions","map","action","label","formatActionLabel","err","errorMessage","Error","console","labels","where_is_driver","driver_late","contact_driver","cannot_contact_driver","cancel_booking","talk_to_agent","call_driver","message_driver","payment_query","safety_concern","replace","handleSendMessage","e","preventDefault","trim","userMessage","prev","sendMessage","botMessage","metadata","requiresEscalation","escalationMessage","setTimeout","errorBotMessage","handleQuickAction","sendQuickAction","a","handleCloseChat","closeConversation","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","title","toLocaleTimeString","hour","minute","ref","length","disabled","onSubmit","type","value","onChange","target","placeholder","_c","$RefreshReg$"],"sources":["C:/Users/ASUS-PC/Desktop/Projects/RideShare--Chatbot/frontend/src/components/Chatbot.tsx"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\r\nimport ChatbotApiService from '../services/chatbotApi';\r\nimport { ChatbotProps, Message, QuickActionButton } from '../types';\r\nimport '../styles/chatbot.css';\r\n\r\nconst Chatbot: React.FC<ChatbotProps> = ({\r\n  bookingId,\r\n  userId,\r\n  driverId,\r\n  apiUrl,\r\n  onEscalation,\r\n  onClose,\r\n}) => {\r\n  const [conversationId, setConversationId] = useState<string | null>(null);\r\n  const [messages, setMessages] = useState<Message[]>([]);\r\n  const [inputText, setInputText] = useState('');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [isEscalated, setIsEscalated] = useState(false);\r\n  const [escalationType, setEscalationType] = useState<'driver' | 'support' | 'safety' | null>(null);\r\n  const [quickActions, setQuickActions] = useState<QuickActionButton[]>([]);\r\n  const messagesEndRef = useRef<HTMLDivElement>(null);\r\n  const apiService = useRef(new ChatbotApiService(apiUrl));\r\n\r\n  // Initialize chatbot on mount\r\n  useEffect(() => {\r\n    initializeChatbot();\r\n  }, [bookingId, userId]);\r\n\r\n  // Scroll to bottom when new messages arrive\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [messages]);\r\n\r\n  const scrollToBottom = () => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  };\r\n\r\n  const initializeChatbot = async () => {\r\n    try {\r\n      setIsLoading(true);\r\n      setError(null);\r\n\r\n      const response = await apiService.current.initiateChatbot(bookingId, userId, driverId);\r\n\r\n      setConversationId(response.conversationId);\r\n\r\n      // Add greeting message\r\n      const greetingMessage: Message = {\r\n        id: `msg_${Date.now()}`,\r\n        sender: 'bot',\r\n        text: response.message,\r\n        timestamp: new Date(),\r\n      };\r\n\r\n      setMessages([greetingMessage]);\r\n\r\n      // Set quick actions\r\n      const actions: QuickActionButton[] = (response.suggestedActions || []).map(\r\n        (action: string) => ({\r\n          id: action,\r\n          label: formatActionLabel(action),\r\n          action,\r\n        })\r\n      );\r\n      setQuickActions(actions);\r\n    } catch (err) {\r\n      const errorMessage = err instanceof Error ? err.message : 'Failed to initialize chatbot';\r\n      setError(errorMessage);\r\n      console.error('Chatbot initialization error:', err);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const formatActionLabel = (action: string): string => {\r\n    const labels: Record<string, string> = {\r\n      where_is_driver: 'üìç Where is my driver?',\r\n      driver_late: '‚è∞ Driver is late',\r\n      contact_driver: 'üìû Contact driver',\r\n      cannot_contact_driver: '‚ùå Cannot reach driver',\r\n      cancel_booking: 'üö´ Cancel booking',\r\n      talk_to_agent: 'üë§ Talk to agent',\r\n      call_driver: 'üìû Call driver',\r\n      message_driver: 'üí¨ Message driver',\r\n      payment_query: 'üí≥ Payment question',\r\n      safety_concern: '‚ö†Ô∏è Safety concern',\r\n    };\r\n    return labels[action] || action.replace(/_/g, ' ');\r\n  };\r\n\r\n  const handleSendMessage = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n\r\n    if (!inputText.trim() || !conversationId) {\r\n      return;\r\n    }\r\n\r\n    // Add user message\r\n    const userMessage: Message = {\r\n      id: `msg_${Date.now()}`,\r\n      sender: 'user',\r\n      text: inputText,\r\n      timestamp: new Date(),\r\n    };\r\n\r\n    setMessages((prev) => [...prev, userMessage]);\r\n    setInputText('');\r\n    setIsLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const response = await apiService.current.sendMessage(\r\n        conversationId,\r\n        bookingId,\r\n        userId,\r\n        inputText\r\n      );\r\n\r\n      // Add bot response\r\n      const botMessage: Message = {\r\n        id: `msg_${Date.now()}`,\r\n        sender: 'bot',\r\n        text: response.message,\r\n        timestamp: new Date(),\r\n        metadata: response.metadata,\r\n      };\r\n\r\n      setMessages((prev) => [...prev, botMessage]);\r\n\r\n      // Update quick actions\r\n      if (response.suggestedActions) {\r\n        const actions: QuickActionButton[] = response.suggestedActions.map((action: string) => ({\r\n          id: action,\r\n          label: formatActionLabel(action),\r\n          action,\r\n        }));\r\n        setQuickActions(actions);\r\n      }\r\n\r\n      // Handle escalation\r\n      if (response.requiresEscalation) {\r\n        setIsEscalated(true);\r\n        setEscalationType(response.escalationType as 'driver' | 'support' | 'safety');\r\n\r\n        if (onEscalation) {\r\n          onEscalation(response.escalationType);\r\n        }\r\n\r\n        const escalationMessage: Message = {\r\n          id: `msg_${Date.now()}`,\r\n          sender: 'bot',\r\n          text: `I'm escalating your issue to ${response.escalationType} support. Please stand by until they connect with you.`,\r\n          timestamp: new Date(),\r\n        };\r\n\r\n        setTimeout(() => {\r\n          setMessages((prev) => [...prev, escalationMessage]);\r\n        }, 1000);\r\n      }\r\n    } catch (err) {\r\n      const errorMessage = err instanceof Error ? err.message : 'Failed to send message';\r\n      setError(errorMessage);\r\n      console.error('Message send error:', err);\r\n\r\n      const errorBotMessage: Message = {\r\n        id: `msg_${Date.now()}`,\r\n        sender: 'bot',\r\n        text: 'Sorry, I encountered an error. Let me connect you with support.',\r\n        timestamp: new Date(),\r\n      };\r\n\r\n      setMessages((prev) => [...prev, errorBotMessage]);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleQuickAction = async (action: string) => {\r\n    if (!conversationId) {\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const response = await apiService.current.sendQuickAction(\r\n        conversationId,\r\n        bookingId,\r\n        userId,\r\n        action\r\n      );\r\n\r\n      // Add action as user message\r\n      const userMessage: Message = {\r\n        id: `msg_${Date.now()}`,\r\n        sender: 'user',\r\n        text: formatActionLabel(action),\r\n        timestamp: new Date(),\r\n      };\r\n\r\n      setMessages((prev) => [...prev, userMessage]);\r\n\r\n      // Add bot response\r\n      const botMessage: Message = {\r\n        id: `msg_${Date.now()}`,\r\n        sender: 'bot',\r\n        text: response.message,\r\n        timestamp: new Date(),\r\n        metadata: response.metadata,\r\n      };\r\n\r\n      setMessages((prev) => [...prev, botMessage]);\r\n\r\n      // Update quick actions\r\n      if (response.suggestedActions) {\r\n        const actions: QuickActionButton[] = response.suggestedActions.map((a: string) => ({\r\n          id: a,\r\n          label: formatActionLabel(a),\r\n          action: a,\r\n        }));\r\n        setQuickActions(actions);\r\n      }\r\n\r\n      // Handle escalation\r\n      if (response.requiresEscalation) {\r\n        setIsEscalated(true);\r\n        setEscalationType(response.escalationType as 'driver' | 'support' | 'safety');\r\n\r\n        if (onEscalation) {\r\n          onEscalation(response.escalationType);\r\n        }\r\n      }\r\n    } catch (err) {\r\n      const errorMessage = err instanceof Error ? err.message : 'Failed to process action';\r\n      setError(errorMessage);\r\n      console.error('Quick action error:', err);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleCloseChat = async () => {\r\n    if (conversationId) {\r\n      try {\r\n        await apiService.current.closeConversation(conversationId, 'User closed chat');\r\n      } catch (err) {\r\n        console.error('Error closing conversation:', err);\r\n      }\r\n    }\r\n\r\n    if (onClose) {\r\n      onClose();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"chatbot-container\">\r\n      <div className=\"chatbot-header\">\r\n        <h3>RideShare Support</h3>\r\n        <button className=\"close-btn\" onClick={handleCloseChat} title=\"Close chat\">\r\n          ‚úï\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"chatbot-messages\">\r\n        {messages.map((message) => (\r\n          <div key={message.id} className={`message message-${message.sender}`}>\r\n            <div className=\"message-content\">\r\n              {message.sender === 'bot' && <span className=\"message-avatar\">ü§ñ</span>}\r\n              {message.sender === 'user' && <span className=\"message-avatar\">üë§</span>}\r\n              {message.sender === 'driver' && <span className=\"message-avatar\">üöó</span>}\r\n              {message.sender === 'support_agent' && <span className=\"message-avatar\">üë®‚Äçüíº</span>}\r\n              <div className=\"message-text\">{message.text}</div>\r\n              <span className=\"message-time\">\r\n                {message.timestamp.toLocaleTimeString([], {\r\n                  hour: '2-digit',\r\n                  minute: '2-digit',\r\n                })}\r\n              </span>\r\n            </div>\r\n          </div>\r\n        ))}\r\n\r\n        {isLoading && (\r\n          <div className=\"message message-bot\">\r\n            <div className=\"message-content\">\r\n              <span className=\"message-avatar\">ü§ñ</span>\r\n              <div className=\"typing-indicator\">\r\n                <span></span>\r\n                <span></span>\r\n                <span></span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {error && (\r\n          <div className=\"error-message\">\r\n            <strong>Error:</strong> {error}\r\n          </div>\r\n        )}\r\n\r\n        <div ref={messagesEndRef} />\r\n      </div>\r\n\r\n      {isEscalated && (\r\n        <div className=\"escalation-notice\">\r\n          <p>\r\n            üîî Your chat has been escalated to {escalationType || 'support'}. They will be with you\r\n            shortly.\r\n          </p>\r\n        </div>\r\n      )}\r\n\r\n      {!isEscalated && (\r\n        <>\r\n          {quickActions.length > 0 && (\r\n            <div className=\"quick-actions\">\r\n              {quickActions.map((action) => (\r\n                <button\r\n                  key={action.id}\r\n                  className=\"quick-action-btn\"\r\n                  onClick={() => handleQuickAction(action.action)}\r\n                  disabled={isLoading}\r\n                >\r\n                  {action.label}\r\n                </button>\r\n              ))}\r\n            </div>\r\n          )}\r\n\r\n          <form onSubmit={handleSendMessage} className=\"chatbot-input-form\">\r\n            <input\r\n              type=\"text\"\r\n              value={inputText}\r\n              onChange={(e) => setInputText(e.target.value)}\r\n              placeholder=\"Type your question...\"\r\n              disabled={isLoading || isEscalated}\r\n              className=\"chatbot-input\"\r\n            />\r\n            <button\r\n              type=\"submit\"\r\n              disabled={isLoading || !inputText.trim() || isEscalated}\r\n              className=\"send-btn\"\r\n            >\r\n              Send\r\n            </button>\r\n          </form>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Chatbot;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,EAAEC,MAAM,QAAQ,OAAO;AAC1D,OAAOC,iBAAiB,MAAM,wBAAwB;AAEtD,OAAO,uBAAuB;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAE/B,MAAMC,OAA+B,GAAGA,CAAC;EACvCC,SAAS;EACTC,MAAM;EACNC,QAAQ;EACRC,MAAM;EACNC,YAAY;EACZC;AACF,CAAC,KAAK;EAAAC,EAAA;EACJ,MAAM,CAACC,cAAc,EAAEC,iBAAiB,CAAC,GAAGhB,QAAQ,CAAgB,IAAI,CAAC;EACzE,MAAM,CAACiB,QAAQ,EAAEC,WAAW,CAAC,GAAGlB,QAAQ,CAAY,EAAE,CAAC;EACvD,MAAM,CAACmB,SAAS,EAAEC,YAAY,CAAC,GAAGpB,QAAQ,CAAC,EAAE,CAAC;EAC9C,MAAM,CAACqB,SAAS,EAAEC,YAAY,CAAC,GAAGtB,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM,CAACuB,KAAK,EAAEC,QAAQ,CAAC,GAAGxB,QAAQ,CAAgB,IAAI,CAAC;EACvD,MAAM,CAACyB,WAAW,EAAEC,cAAc,CAAC,GAAG1B,QAAQ,CAAC,KAAK,CAAC;EACrD,MAAM,CAAC2B,cAAc,EAAEC,iBAAiB,CAAC,GAAG5B,QAAQ,CAAyC,IAAI,CAAC;EAClG,MAAM,CAAC6B,YAAY,EAAEC,eAAe,CAAC,GAAG9B,QAAQ,CAAsB,EAAE,CAAC;EACzE,MAAM+B,cAAc,GAAG9B,MAAM,CAAiB,IAAI,CAAC;EACnD,MAAM+B,UAAU,GAAG/B,MAAM,CAAC,IAAIC,iBAAiB,CAACS,MAAM,CAAC,CAAC;;EAExD;EACAZ,SAAS,CAAC,MAAM;IACdkC,iBAAiB,CAAC,CAAC;EACrB,CAAC,EAAE,CAACzB,SAAS,EAAEC,MAAM,CAAC,CAAC;;EAEvB;EACAV,SAAS,CAAC,MAAM;IACdmC,cAAc,CAAC,CAAC;EAClB,CAAC,EAAE,CAACjB,QAAQ,CAAC,CAAC;EAEd,MAAMiB,cAAc,GAAGA,CAAA,KAAM;IAAA,IAAAC,qBAAA;IAC3B,CAAAA,qBAAA,GAAAJ,cAAc,CAACK,OAAO,cAAAD,qBAAA,uBAAtBA,qBAAA,CAAwBE,cAAc,CAAC;MAAEC,QAAQ,EAAE;IAAS,CAAC,CAAC;EAChE,CAAC;EAED,MAAML,iBAAiB,GAAG,MAAAA,CAAA,KAAY;IACpC,IAAI;MACFX,YAAY,CAAC,IAAI,CAAC;MAClBE,QAAQ,CAAC,IAAI,CAAC;MAEd,MAAMe,QAAQ,GAAG,MAAMP,UAAU,CAACI,OAAO,CAACI,eAAe,CAAChC,SAAS,EAAEC,MAAM,EAAEC,QAAQ,CAAC;MAEtFM,iBAAiB,CAACuB,QAAQ,CAACxB,cAAc,CAAC;;MAE1C;MACA,MAAM0B,eAAwB,GAAG;QAC/BC,EAAE,EAAE,OAAOC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE;QACvBC,MAAM,EAAE,KAAK;QACbC,IAAI,EAAEP,QAAQ,CAACQ,OAAO;QACtBC,SAAS,EAAE,IAAIL,IAAI,CAAC;MACtB,CAAC;MAEDzB,WAAW,CAAC,CAACuB,eAAe,CAAC,CAAC;;MAE9B;MACA,MAAMQ,OAA4B,GAAG,CAACV,QAAQ,CAACW,gBAAgB,IAAI,EAAE,EAAEC,GAAG,CACvEC,MAAc,KAAM;QACnBV,EAAE,EAAEU,MAAM;QACVC,KAAK,EAAEC,iBAAiB,CAACF,MAAM,CAAC;QAChCA;MACF,CAAC,CACH,CAAC;MACDtB,eAAe,CAACmB,OAAO,CAAC;IAC1B,CAAC,CAAC,OAAOM,GAAG,EAAE;MACZ,MAAMC,YAAY,GAAGD,GAAG,YAAYE,KAAK,GAAGF,GAAG,CAACR,OAAO,GAAG,8BAA8B;MACxFvB,QAAQ,CAACgC,YAAY,CAAC;MACtBE,OAAO,CAACnC,KAAK,CAAC,+BAA+B,EAAEgC,GAAG,CAAC;IACrD,CAAC,SAAS;MACRjC,YAAY,CAAC,KAAK,CAAC;IACrB;EACF,CAAC;EAED,MAAMgC,iBAAiB,GAAIF,MAAc,IAAa;IACpD,MAAMO,MAA8B,GAAG;MACrCC,eAAe,EAAE,wBAAwB;MACzCC,WAAW,EAAE,kBAAkB;MAC/BC,cAAc,EAAE,mBAAmB;MACnCC,qBAAqB,EAAE,uBAAuB;MAC9CC,cAAc,EAAE,mBAAmB;MACnCC,aAAa,EAAE,kBAAkB;MACjCC,WAAW,EAAE,gBAAgB;MAC7BC,cAAc,EAAE,mBAAmB;MACnCC,aAAa,EAAE,qBAAqB;MACpCC,cAAc,EAAE;IAClB,CAAC;IACD,OAAOV,MAAM,CAACP,MAAM,CAAC,IAAIA,MAAM,CAACkB,OAAO,CAAC,IAAI,EAAE,GAAG,CAAC;EACpD,CAAC;EAED,MAAMC,iBAAiB,GAAG,MAAOC,CAAkB,IAAK;IACtDA,CAAC,CAACC,cAAc,CAAC,CAAC;IAElB,IAAI,CAACtD,SAAS,CAACuD,IAAI,CAAC,CAAC,IAAI,CAAC3D,cAAc,EAAE;MACxC;IACF;;IAEA;IACA,MAAM4D,WAAoB,GAAG;MAC3BjC,EAAE,EAAE,OAAOC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE;MACvBC,MAAM,EAAE,MAAM;MACdC,IAAI,EAAE3B,SAAS;MACf6B,SAAS,EAAE,IAAIL,IAAI,CAAC;IACtB,CAAC;IAEDzB,WAAW,CAAE0D,IAAI,IAAK,CAAC,GAAGA,IAAI,EAAED,WAAW,CAAC,CAAC;IAC7CvD,YAAY,CAAC,EAAE,CAAC;IAChBE,YAAY,CAAC,IAAI,CAAC;IAClBE,QAAQ,CAAC,IAAI,CAAC;IAEd,IAAI;MACF,MAAMe,QAAQ,GAAG,MAAMP,UAAU,CAACI,OAAO,CAACyC,WAAW,CACnD9D,cAAc,EACdP,SAAS,EACTC,MAAM,EACNU,SACF,CAAC;;MAED;MACA,MAAM2D,UAAmB,GAAG;QAC1BpC,EAAE,EAAE,OAAOC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE;QACvBC,MAAM,EAAE,KAAK;QACbC,IAAI,EAAEP,QAAQ,CAACQ,OAAO;QACtBC,SAAS,EAAE,IAAIL,IAAI,CAAC,CAAC;QACrBoC,QAAQ,EAAExC,QAAQ,CAACwC;MACrB,CAAC;MAED7D,WAAW,CAAE0D,IAAI,IAAK,CAAC,GAAGA,IAAI,EAAEE,UAAU,CAAC,CAAC;;MAE5C;MACA,IAAIvC,QAAQ,CAACW,gBAAgB,EAAE;QAC7B,MAAMD,OAA4B,GAAGV,QAAQ,CAACW,gBAAgB,CAACC,GAAG,CAAEC,MAAc,KAAM;UACtFV,EAAE,EAAEU,MAAM;UACVC,KAAK,EAAEC,iBAAiB,CAACF,MAAM,CAAC;UAChCA;QACF,CAAC,CAAC,CAAC;QACHtB,eAAe,CAACmB,OAAO,CAAC;MAC1B;;MAEA;MACA,IAAIV,QAAQ,CAACyC,kBAAkB,EAAE;QAC/BtD,cAAc,CAAC,IAAI,CAAC;QACpBE,iBAAiB,CAACW,QAAQ,CAACZ,cAAiD,CAAC;QAE7E,IAAIf,YAAY,EAAE;UAChBA,YAAY,CAAC2B,QAAQ,CAACZ,cAAc,CAAC;QACvC;QAEA,MAAMsD,iBAA0B,GAAG;UACjCvC,EAAE,EAAE,OAAOC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE;UACvBC,MAAM,EAAE,KAAK;UACbC,IAAI,EAAE,gCAAgCP,QAAQ,CAACZ,cAAc,wDAAwD;UACrHqB,SAAS,EAAE,IAAIL,IAAI,CAAC;QACtB,CAAC;QAEDuC,UAAU,CAAC,MAAM;UACfhE,WAAW,CAAE0D,IAAI,IAAK,CAAC,GAAGA,IAAI,EAAEK,iBAAiB,CAAC,CAAC;QACrD,CAAC,EAAE,IAAI,CAAC;MACV;IACF,CAAC,CAAC,OAAO1B,GAAG,EAAE;MACZ,MAAMC,YAAY,GAAGD,GAAG,YAAYE,KAAK,GAAGF,GAAG,CAACR,OAAO,GAAG,wBAAwB;MAClFvB,QAAQ,CAACgC,YAAY,CAAC;MACtBE,OAAO,CAACnC,KAAK,CAAC,qBAAqB,EAAEgC,GAAG,CAAC;MAEzC,MAAM4B,eAAwB,GAAG;QAC/BzC,EAAE,EAAE,OAAOC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE;QACvBC,MAAM,EAAE,KAAK;QACbC,IAAI,EAAE,iEAAiE;QACvEE,SAAS,EAAE,IAAIL,IAAI,CAAC;MACtB,CAAC;MAEDzB,WAAW,CAAE0D,IAAI,IAAK,CAAC,GAAGA,IAAI,EAAEO,eAAe,CAAC,CAAC;IACnD,CAAC,SAAS;MACR7D,YAAY,CAAC,KAAK,CAAC;IACrB;EACF,CAAC;EAED,MAAM8D,iBAAiB,GAAG,MAAOhC,MAAc,IAAK;IAClD,IAAI,CAACrC,cAAc,EAAE;MACnB;IACF;IAEAO,YAAY,CAAC,IAAI,CAAC;IAClBE,QAAQ,CAAC,IAAI,CAAC;IAEd,IAAI;MACF,MAAMe,QAAQ,GAAG,MAAMP,UAAU,CAACI,OAAO,CAACiD,eAAe,CACvDtE,cAAc,EACdP,SAAS,EACTC,MAAM,EACN2C,MACF,CAAC;;MAED;MACA,MAAMuB,WAAoB,GAAG;QAC3BjC,EAAE,EAAE,OAAOC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE;QACvBC,MAAM,EAAE,MAAM;QACdC,IAAI,EAAEQ,iBAAiB,CAACF,MAAM,CAAC;QAC/BJ,SAAS,EAAE,IAAIL,IAAI,CAAC;MACtB,CAAC;MAEDzB,WAAW,CAAE0D,IAAI,IAAK,CAAC,GAAGA,IAAI,EAAED,WAAW,CAAC,CAAC;;MAE7C;MACA,MAAMG,UAAmB,GAAG;QAC1BpC,EAAE,EAAE,OAAOC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE;QACvBC,MAAM,EAAE,KAAK;QACbC,IAAI,EAAEP,QAAQ,CAACQ,OAAO;QACtBC,SAAS,EAAE,IAAIL,IAAI,CAAC,CAAC;QACrBoC,QAAQ,EAAExC,QAAQ,CAACwC;MACrB,CAAC;MAED7D,WAAW,CAAE0D,IAAI,IAAK,CAAC,GAAGA,IAAI,EAAEE,UAAU,CAAC,CAAC;;MAE5C;MACA,IAAIvC,QAAQ,CAACW,gBAAgB,EAAE;QAC7B,MAAMD,OAA4B,GAAGV,QAAQ,CAACW,gBAAgB,CAACC,GAAG,CAAEmC,CAAS,KAAM;UACjF5C,EAAE,EAAE4C,CAAC;UACLjC,KAAK,EAAEC,iBAAiB,CAACgC,CAAC,CAAC;UAC3BlC,MAAM,EAAEkC;QACV,CAAC,CAAC,CAAC;QACHxD,eAAe,CAACmB,OAAO,CAAC;MAC1B;;MAEA;MACA,IAAIV,QAAQ,CAACyC,kBAAkB,EAAE;QAC/BtD,cAAc,CAAC,IAAI,CAAC;QACpBE,iBAAiB,CAACW,QAAQ,CAACZ,cAAiD,CAAC;QAE7E,IAAIf,YAAY,EAAE;UAChBA,YAAY,CAAC2B,QAAQ,CAACZ,cAAc,CAAC;QACvC;MACF;IACF,CAAC,CAAC,OAAO4B,GAAG,EAAE;MACZ,MAAMC,YAAY,GAAGD,GAAG,YAAYE,KAAK,GAAGF,GAAG,CAACR,OAAO,GAAG,0BAA0B;MACpFvB,QAAQ,CAACgC,YAAY,CAAC;MACtBE,OAAO,CAACnC,KAAK,CAAC,qBAAqB,EAAEgC,GAAG,CAAC;IAC3C,CAAC,SAAS;MACRjC,YAAY,CAAC,KAAK,CAAC;IACrB;EACF,CAAC;EAED,MAAMiE,eAAe,GAAG,MAAAA,CAAA,KAAY;IAClC,IAAIxE,cAAc,EAAE;MAClB,IAAI;QACF,MAAMiB,UAAU,CAACI,OAAO,CAACoD,iBAAiB,CAACzE,cAAc,EAAE,kBAAkB,CAAC;MAChF,CAAC,CAAC,OAAOwC,GAAG,EAAE;QACZG,OAAO,CAACnC,KAAK,CAAC,6BAA6B,EAAEgC,GAAG,CAAC;MACnD;IACF;IAEA,IAAI1C,OAAO,EAAE;MACXA,OAAO,CAAC,CAAC;IACX;EACF,CAAC;EAED,oBACET,OAAA;IAAKqF,SAAS,EAAC,mBAAmB;IAAAC,QAAA,gBAChCtF,OAAA;MAAKqF,SAAS,EAAC,gBAAgB;MAAAC,QAAA,gBAC7BtF,OAAA;QAAAsF,QAAA,EAAI;MAAiB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eAC1B1F,OAAA;QAAQqF,SAAS,EAAC,WAAW;QAACM,OAAO,EAAER,eAAgB;QAACS,KAAK,EAAC,YAAY;QAAAN,QAAA,EAAC;MAE3E;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN,CAAC,eAEN1F,OAAA;MAAKqF,SAAS,EAAC,kBAAkB;MAAAC,QAAA,GAC9BzE,QAAQ,CAACkC,GAAG,CAAEJ,OAAO,iBACpB3C,OAAA;QAAsBqF,SAAS,EAAE,mBAAmB1C,OAAO,CAACF,MAAM,EAAG;QAAA6C,QAAA,eACnEtF,OAAA;UAAKqF,SAAS,EAAC,iBAAiB;UAAAC,QAAA,GAC7B3C,OAAO,CAACF,MAAM,KAAK,KAAK,iBAAIzC,OAAA;YAAMqF,SAAS,EAAC,gBAAgB;YAAAC,QAAA,EAAC;UAAE;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,EACtE/C,OAAO,CAACF,MAAM,KAAK,MAAM,iBAAIzC,OAAA;YAAMqF,SAAS,EAAC,gBAAgB;YAAAC,QAAA,EAAC;UAAE;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,EACvE/C,OAAO,CAACF,MAAM,KAAK,QAAQ,iBAAIzC,OAAA;YAAMqF,SAAS,EAAC,gBAAgB;YAAAC,QAAA,EAAC;UAAE;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,EACzE/C,OAAO,CAACF,MAAM,KAAK,eAAe,iBAAIzC,OAAA;YAAMqF,SAAS,EAAC,gBAAgB;YAAAC,QAAA,EAAC;UAAK;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eACpF1F,OAAA;YAAKqF,SAAS,EAAC,cAAc;YAAAC,QAAA,EAAE3C,OAAO,CAACD;UAAI;YAAA6C,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eAClD1F,OAAA;YAAMqF,SAAS,EAAC,cAAc;YAAAC,QAAA,EAC3B3C,OAAO,CAACC,SAAS,CAACiD,kBAAkB,CAAC,EAAE,EAAE;cACxCC,IAAI,EAAE,SAAS;cACfC,MAAM,EAAE;YACV,CAAC;UAAC;YAAAR,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACE,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACJ;MAAC,GAbE/C,OAAO,CAACL,EAAE;QAAAiD,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAcf,CACN,CAAC,EAEDzE,SAAS,iBACRjB,OAAA;QAAKqF,SAAS,EAAC,qBAAqB;QAAAC,QAAA,eAClCtF,OAAA;UAAKqF,SAAS,EAAC,iBAAiB;UAAAC,QAAA,gBAC9BtF,OAAA;YAAMqF,SAAS,EAAC,gBAAgB;YAAAC,QAAA,EAAC;UAAE;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eAC1C1F,OAAA;YAAKqF,SAAS,EAAC,kBAAkB;YAAAC,QAAA,gBAC/BtF,OAAA;cAAAuF,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAY,CAAC,eACb1F,OAAA;cAAAuF,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAY,CAAC,eACb1F,OAAA;cAAAuF,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAY,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACV,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CACN,EAEAvE,KAAK,iBACJnB,OAAA;QAAKqF,SAAS,EAAC,eAAe;QAAAC,QAAA,gBAC5BtF,OAAA;UAAAsF,QAAA,EAAQ;QAAM;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,KAAC,EAACvE,KAAK;MAAA;QAAAoE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC3B,CACN,eAED1F,OAAA;QAAKgG,GAAG,EAAErE;MAAe;QAAA4D,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACzB,CAAC,EAELrE,WAAW,iBACVrB,OAAA;MAAKqF,SAAS,EAAC,mBAAmB;MAAAC,QAAA,eAChCtF,OAAA;QAAAsF,QAAA,GAAG,+CACkC,EAAC/D,cAAc,IAAI,SAAS,EAAC,kCAElE;MAAA;QAAAgE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACD,CACN,EAEA,CAACrE,WAAW,iBACXrB,OAAA,CAAAE,SAAA;MAAAoF,QAAA,GACG7D,YAAY,CAACwE,MAAM,GAAG,CAAC,iBACtBjG,OAAA;QAAKqF,SAAS,EAAC,eAAe;QAAAC,QAAA,EAC3B7D,YAAY,CAACsB,GAAG,CAAEC,MAAM,iBACvBhD,OAAA;UAEEqF,SAAS,EAAC,kBAAkB;UAC5BM,OAAO,EAAEA,CAAA,KAAMX,iBAAiB,CAAChC,MAAM,CAACA,MAAM,CAAE;UAChDkD,QAAQ,EAAEjF,SAAU;UAAAqE,QAAA,EAEnBtC,MAAM,CAACC;QAAK,GALRD,MAAM,CAACV,EAAE;UAAAiD,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAMR,CACT;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACC,CACN,eAED1F,OAAA;QAAMmG,QAAQ,EAAEhC,iBAAkB;QAACkB,SAAS,EAAC,oBAAoB;QAAAC,QAAA,gBAC/DtF,OAAA;UACEoG,IAAI,EAAC,MAAM;UACXC,KAAK,EAAEtF,SAAU;UACjBuF,QAAQ,EAAGlC,CAAC,IAAKpD,YAAY,CAACoD,CAAC,CAACmC,MAAM,CAACF,KAAK,CAAE;UAC9CG,WAAW,EAAC,uBAAuB;UACnCN,QAAQ,EAAEjF,SAAS,IAAII,WAAY;UACnCgE,SAAS,EAAC;QAAe;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC1B,CAAC,eACF1F,OAAA;UACEoG,IAAI,EAAC,QAAQ;UACbF,QAAQ,EAAEjF,SAAS,IAAI,CAACF,SAAS,CAACuD,IAAI,CAAC,CAAC,IAAIjD,WAAY;UACxDgE,SAAS,EAAC,UAAU;UAAAC,QAAA,EACrB;QAED;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACL,CAAC;IAAA,eACP,CACH;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV,CAAC;AAAChF,EAAA,CA7VIP,OAA+B;AAAAsG,EAAA,GAA/BtG,OAA+B;AA+VrC,eAAeA,OAAO;AAAC,IAAAsG,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}