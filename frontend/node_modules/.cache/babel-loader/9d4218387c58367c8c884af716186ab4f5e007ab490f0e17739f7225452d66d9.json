{"ast":null,"code":"var _s = $RefreshSig$();\n// ============================================================\n// BRD-Compliant Chat Controller Hook\n// Manages chat state, booking context, quick actions, escalation\n// ============================================================\n\nimport { useState, useCallback, useEffect } from 'react';\nimport ChatService from '../chat_service/api';\nexport const useChatController = ({\n  userId,\n  bookingId,\n  driverId\n}) => {\n  _s();\n  const [conversationId, setConversationId] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  // BRD Â§5.2: Booking Context\n  const [bookingContext, setBookingContext] = useState(null);\n\n  // BRD Epic 3: Quick Actions\n  const [quickActions, setQuickActions] = useState([]);\n\n  // BRD Epic 5: Escalation State\n  const [isEscalated, setIsEscalated] = useState(false);\n  const [escalationType, setEscalationType] = useState(null);\n\n  // BRD Â§5.1, Epic 1, Epic 2: Initialize chatbot with context-aware greeting\n  const initializeChatbot = useCallback(async () => {\n    setIsLoading(true);\n    setError(null);\n    try {\n      const response = await ChatService.initiateChatbot(bookingId, userId, driverId);\n      setConversationId(response.conversationId);\n\n      // BRD Â§5.2: Store booking context\n      if (response.bookingContext) {\n        setBookingContext(response.bookingContext);\n      }\n\n      // Add greeting message\n      const greetingMsg = {\n        id: `msg_${Date.now()}`,\n        text: response.message,\n        sender: 'bot',\n        timestamp: new Date(),\n        metadata: {\n          source: 'initiate'\n        }\n      };\n      setMessages([greetingMsg]);\n\n      // BRD Epic 3: Set quick actions\n      if (response.suggestedActions) {\n        updateQuickActions(response.suggestedActions);\n      }\n    } catch (err) {\n      const errorMessage = err instanceof Error ? err.message : 'Failed to initialize chatbot';\n      setError(errorMessage);\n      console.error('Chatbot initialization error:', err);\n    } finally {\n      setIsLoading(false);\n    }\n  }, [bookingId, userId, driverId]);\n\n  // Initialize on mount\n  useEffect(() => {\n    initializeChatbot();\n  }, [initializeChatbot]);\n\n  // BRD Epic 4: Send free-text message\n  const sendMessage = useCallback(async text => {\n    if (!text.trim() || !conversationId) return;\n    const userMsg = {\n      id: `msg_${Date.now()}`,\n      text,\n      sender: 'user',\n      timestamp: new Date()\n    };\n    setMessages(prev => [...prev, userMsg]);\n    setIsLoading(true);\n    setError(null);\n    try {\n      const response = await ChatService.sendMessage(conversationId, bookingId, userId, text);\n      const botMsg = {\n        id: `msg_${Date.now() + 1}`,\n        text: response.message || response.reply || '',\n        sender: 'bot',\n        timestamp: new Date(response.timestamp || Date.now()),\n        intent: response.intent,\n        metadata: response.metadata\n      };\n      setMessages(prev => [...prev, botMsg]);\n\n      // Update quick actions if provided\n      if (response.suggestedActions) {\n        updateQuickActions(response.suggestedActions);\n      }\n\n      // Update booking context if provided\n      if (response.bookingContext) {\n        setBookingContext(response.bookingContext);\n      }\n\n      // BRD Â§5.5: Handle escalation\n      if (response.requiresEscalation) {\n        handleEscalation(response.escalationType || 'support');\n      }\n    } catch (err) {\n      setError('Failed to send message. Please try again.');\n      const errorMsg = {\n        id: `msg_${Date.now() + 2}`,\n        text: 'âš ï¸ Network error. Please check your connection.',\n        sender: 'bot',\n        timestamp: new Date()\n      };\n      setMessages(prev => [...prev, errorMsg]);\n    } finally {\n      setIsLoading(false);\n    }\n  }, [conversationId, bookingId, userId]);\n\n  // BRD Epic 3: Handle quick action button tap\n  const sendQuickAction = useCallback(async action => {\n    if (!conversationId) return;\n    setIsLoading(true);\n    setError(null);\n    try {\n      const response = await ChatService.sendQuickAction(conversationId, bookingId, userId, action);\n\n      // Add user action message\n      const userMsg = {\n        id: `msg_${Date.now()}`,\n        text: `${getActionIcon(action)} ${formatActionLabel(action)}`,\n        sender: 'user',\n        timestamp: new Date()\n      };\n      setMessages(prev => [...prev, userMsg]);\n\n      // Add bot response\n      const botMsg = {\n        id: `msg_${Date.now() + 1}`,\n        text: response.message || response.reply || '',\n        sender: 'bot',\n        timestamp: new Date(response.timestamp || Date.now()),\n        intent: response.intent,\n        metadata: response.metadata\n      };\n      setMessages(prev => [...prev, botMsg]);\n\n      // Update quick actions\n      if (response.suggestedActions) {\n        updateQuickActions(response.suggestedActions);\n      }\n\n      // Update booking context\n      if (response.bookingContext) {\n        setBookingContext(response.bookingContext);\n      }\n\n      // Handle escalation\n      if (response.requiresEscalation) {\n        handleEscalation(response.escalationType || 'support');\n      }\n    } catch (err) {\n      setError('Failed to process action. Please try again.');\n    } finally {\n      setIsLoading(false);\n    }\n  }, [conversationId, bookingId, userId]);\n\n  // BRD Epic 5: Handle escalation\n  const handleEscalation = useCallback(type => {\n    setIsEscalated(true);\n    setEscalationType(type);\n  }, []);\n\n  // Helper: Update quick actions from API response\n  const updateQuickActions = actions => {\n    const buttons = actions.map(action => ({\n      id: action,\n      label: formatActionLabel(action),\n      action,\n      icon: getActionIcon(action),\n      variant: getActionVariant(action)\n    }));\n    setQuickActions(buttons);\n  };\n\n  // Helper: Format action labels\n  const formatActionLabel = action => {\n    const labels = {\n      where_is_driver: 'Where is my driver?',\n      driver_late: 'Driver is late',\n      contact_driver: 'Contact driver',\n      cannot_contact_driver: \"Can't reach driver\",\n      cancel_booking: 'Cancel booking',\n      talk_to_agent: 'Talk to agent',\n      call_driver: 'Call driver',\n      message_driver: 'Message driver',\n      payment_query: 'Payment info',\n      safety_concern: 'Safety concern',\n      ok_thanks: 'OK, thanks',\n      wait: \"I'll wait\",\n      emergency_contact: 'Emergency help',\n      retry: 'Try again'\n    };\n    return labels[action] || action.replace(/_/g, ' ');\n  };\n\n  // Helper: Get action icons\n  const getActionIcon = action => {\n    const icons = {\n      where_is_driver: 'ðŸ“',\n      driver_late: 'â°',\n      contact_driver: 'ðŸ“ž',\n      cannot_contact_driver: 'âŒ',\n      cancel_booking: 'ðŸš«',\n      talk_to_agent: 'ðŸ‘¨â€ðŸ’¼',\n      call_driver: 'ðŸ“ž',\n      message_driver: 'ðŸ’¬',\n      payment_query: 'ðŸ’³',\n      safety_concern: 'ðŸš¨',\n      ok_thanks: 'âœ…',\n      wait: 'â³',\n      emergency_contact: 'ðŸ†˜',\n      retry: 'ðŸ”„'\n    };\n    return icons[action] || 'ðŸ’¬';\n  };\n\n  // Helper: Get action variant\n  const getActionVariant = action => {\n    if (action === 'safety_concern' || action === 'emergency_contact') return 'danger';\n    if (action === 'cancel_booking') return 'warning';\n    return 'primary';\n  };\n  return {\n    conversationId,\n    messages,\n    isLoading,\n    error,\n    bookingContext,\n    quickActions,\n    isEscalated,\n    escalationType,\n    sendMessage,\n    sendQuickAction,\n    initializeChatbot\n  };\n};\n_s(useChatController, \"6mKErzvjfmft0MGEjSAo3o5VLuQ=\");","map":{"version":3,"names":["useState","useCallback","useEffect","ChatService","useChatController","userId","bookingId","driverId","_s","conversationId","setConversationId","messages","setMessages","isLoading","setIsLoading","error","setError","bookingContext","setBookingContext","quickActions","setQuickActions","isEscalated","setIsEscalated","escalationType","setEscalationType","initializeChatbot","response","initiateChatbot","greetingMsg","id","Date","now","text","message","sender","timestamp","metadata","source","suggestedActions","updateQuickActions","err","errorMessage","Error","console","sendMessage","trim","userMsg","prev","botMsg","reply","intent","requiresEscalation","handleEscalation","errorMsg","sendQuickAction","action","getActionIcon","formatActionLabel","type","actions","buttons","map","label","icon","variant","getActionVariant","labels","where_is_driver","driver_late","contact_driver","cannot_contact_driver","cancel_booking","talk_to_agent","call_driver","message_driver","payment_query","safety_concern","ok_thanks","wait","emergency_contact","retry","replace","icons"],"sources":["C:/Users/ASUS-PC/Desktop/Projects/RideShare--Chatbot/frontend/src/features/chat/chat_controller/useChatController.ts"],"sourcesContent":["// ============================================================\r\n// BRD-Compliant Chat Controller Hook\r\n// Manages chat state, booking context, quick actions, escalation\r\n// ============================================================\r\n\r\nimport { useState, useCallback, useEffect } from 'react';\r\nimport { ChatMessage, BookingContext, QuickAction } from '../chat_model/types';\r\nimport ChatService from '../chat_service/api';\r\n\r\ninterface UseChatControllerProps {\r\n    userId: string;\r\n    bookingId: string;\r\n    driverId?: string;\r\n}\r\n\r\nexport const useChatController = ({ userId, bookingId, driverId }: UseChatControllerProps) => {\r\n    const [conversationId, setConversationId] = useState<string | null>(null);\r\n    const [messages, setMessages] = useState<ChatMessage[]>([]);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    // BRD Â§5.2: Booking Context\r\n    const [bookingContext, setBookingContext] = useState<BookingContext | null>(null);\r\n\r\n    // BRD Epic 3: Quick Actions\r\n    const [quickActions, setQuickActions] = useState<QuickAction[]>([]);\r\n\r\n    // BRD Epic 5: Escalation State\r\n    const [isEscalated, setIsEscalated] = useState(false);\r\n    const [escalationType, setEscalationType] = useState<'driver' | 'support' | 'safety' | null>(null);\r\n\r\n    // BRD Â§5.1, Epic 1, Epic 2: Initialize chatbot with context-aware greeting\r\n    const initializeChatbot = useCallback(async () => {\r\n        setIsLoading(true);\r\n        setError(null);\r\n\r\n        try {\r\n            const response = await ChatService.initiateChatbot(bookingId, userId, driverId);\r\n\r\n            setConversationId(response.conversationId);\r\n\r\n            // BRD Â§5.2: Store booking context\r\n            if (response.bookingContext) {\r\n                setBookingContext(response.bookingContext);\r\n            }\r\n\r\n            // Add greeting message\r\n            const greetingMsg: ChatMessage = {\r\n                id: `msg_${Date.now()}`,\r\n                text: response.message,\r\n                sender: 'bot',\r\n                timestamp: new Date(),\r\n                metadata: { source: 'initiate' },\r\n            };\r\n            setMessages([greetingMsg]);\r\n\r\n            // BRD Epic 3: Set quick actions\r\n            if (response.suggestedActions) {\r\n                updateQuickActions(response.suggestedActions);\r\n            }\r\n\r\n        } catch (err) {\r\n            const errorMessage = err instanceof Error ? err.message : 'Failed to initialize chatbot';\r\n            setError(errorMessage);\r\n            console.error('Chatbot initialization error:', err);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    }, [bookingId, userId, driverId]);\r\n\r\n    // Initialize on mount\r\n    useEffect(() => {\r\n        initializeChatbot();\r\n    }, [initializeChatbot]);\r\n\r\n    // BRD Epic 4: Send free-text message\r\n    const sendMessage = useCallback(async (text: string) => {\r\n        if (!text.trim() || !conversationId) return;\r\n\r\n        const userMsg: ChatMessage = {\r\n            id: `msg_${Date.now()}`,\r\n            text,\r\n            sender: 'user',\r\n            timestamp: new Date(),\r\n        };\r\n\r\n        setMessages((prev) => [...prev, userMsg]);\r\n        setIsLoading(true);\r\n        setError(null);\r\n\r\n        try {\r\n            const response = await ChatService.sendMessage(conversationId, bookingId, userId, text);\r\n\r\n            const botMsg: ChatMessage = {\r\n                id: `msg_${Date.now() + 1}`,\r\n                text: response.message || response.reply || '',\r\n                sender: 'bot',\r\n                timestamp: new Date(response.timestamp || Date.now()),\r\n                intent: response.intent,\r\n                metadata: response.metadata,\r\n            };\r\n            setMessages((prev) => [...prev, botMsg]);\r\n\r\n            // Update quick actions if provided\r\n            if (response.suggestedActions) {\r\n                updateQuickActions(response.suggestedActions);\r\n            }\r\n\r\n            // Update booking context if provided\r\n            if (response.bookingContext) {\r\n                setBookingContext(response.bookingContext);\r\n            }\r\n\r\n            // BRD Â§5.5: Handle escalation\r\n            if (response.requiresEscalation) {\r\n                handleEscalation(response.escalationType || 'support');\r\n            }\r\n\r\n        } catch (err) {\r\n            setError('Failed to send message. Please try again.');\r\n            const errorMsg: ChatMessage = {\r\n                id: `msg_${Date.now() + 2}`,\r\n                text: 'âš ï¸ Network error. Please check your connection.',\r\n                sender: 'bot',\r\n                timestamp: new Date(),\r\n            };\r\n            setMessages((prev) => [...prev, errorMsg]);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    }, [conversationId, bookingId, userId]);\r\n\r\n    // BRD Epic 3: Handle quick action button tap\r\n    const sendQuickAction = useCallback(async (action: string) => {\r\n        if (!conversationId) return;\r\n\r\n        setIsLoading(true);\r\n        setError(null);\r\n\r\n        try {\r\n            const response = await ChatService.sendQuickAction(conversationId, bookingId, userId, action);\r\n\r\n            // Add user action message\r\n            const userMsg: ChatMessage = {\r\n                id: `msg_${Date.now()}`,\r\n                text: `${getActionIcon(action)} ${formatActionLabel(action)}`,\r\n                sender: 'user',\r\n                timestamp: new Date(),\r\n            };\r\n            setMessages((prev) => [...prev, userMsg]);\r\n\r\n            // Add bot response\r\n            const botMsg: ChatMessage = {\r\n                id: `msg_${Date.now() + 1}`,\r\n                text: response.message || response.reply || '',\r\n                sender: 'bot',\r\n                timestamp: new Date(response.timestamp || Date.now()),\r\n                intent: response.intent,\r\n                metadata: response.metadata,\r\n            };\r\n            setMessages((prev) => [...prev, botMsg]);\r\n\r\n            // Update quick actions\r\n            if (response.suggestedActions) {\r\n                updateQuickActions(response.suggestedActions);\r\n            }\r\n\r\n            // Update booking context\r\n            if (response.bookingContext) {\r\n                setBookingContext(response.bookingContext);\r\n            }\r\n\r\n            // Handle escalation\r\n            if (response.requiresEscalation) {\r\n                handleEscalation(response.escalationType || 'support');\r\n            }\r\n\r\n        } catch (err) {\r\n            setError('Failed to process action. Please try again.');\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    }, [conversationId, bookingId, userId]);\r\n\r\n    // BRD Epic 5: Handle escalation\r\n    const handleEscalation = useCallback((type: 'driver' | 'support' | 'safety') => {\r\n        setIsEscalated(true);\r\n        setEscalationType(type);\r\n    }, []);\r\n\r\n    // Helper: Update quick actions from API response\r\n    const updateQuickActions = (actions: string[]) => {\r\n        const buttons: QuickAction[] = actions.map((action) => ({\r\n            id: action,\r\n            label: formatActionLabel(action),\r\n            action,\r\n            icon: getActionIcon(action),\r\n            variant: getActionVariant(action),\r\n        }));\r\n        setQuickActions(buttons);\r\n    };\r\n\r\n    // Helper: Format action labels\r\n    const formatActionLabel = (action: string): string => {\r\n        const labels: Record<string, string> = {\r\n            where_is_driver: 'Where is my driver?',\r\n            driver_late: 'Driver is late',\r\n            contact_driver: 'Contact driver',\r\n            cannot_contact_driver: \"Can't reach driver\",\r\n            cancel_booking: 'Cancel booking',\r\n            talk_to_agent: 'Talk to agent',\r\n            call_driver: 'Call driver',\r\n            message_driver: 'Message driver',\r\n            payment_query: 'Payment info',\r\n            safety_concern: 'Safety concern',\r\n            ok_thanks: 'OK, thanks',\r\n            wait: \"I'll wait\",\r\n            emergency_contact: 'Emergency help',\r\n            retry: 'Try again',\r\n        };\r\n        return labels[action] || action.replace(/_/g, ' ');\r\n    };\r\n\r\n    // Helper: Get action icons\r\n    const getActionIcon = (action: string): string => {\r\n        const icons: Record<string, string> = {\r\n            where_is_driver: 'ðŸ“',\r\n            driver_late: 'â°',\r\n            contact_driver: 'ðŸ“ž',\r\n            cannot_contact_driver: 'âŒ',\r\n            cancel_booking: 'ðŸš«',\r\n            talk_to_agent: 'ðŸ‘¨â€ðŸ’¼',\r\n            call_driver: 'ðŸ“ž',\r\n            message_driver: 'ðŸ’¬',\r\n            payment_query: 'ðŸ’³',\r\n            safety_concern: 'ðŸš¨',\r\n            ok_thanks: 'âœ…',\r\n            wait: 'â³',\r\n            emergency_contact: 'ðŸ†˜',\r\n            retry: 'ðŸ”„',\r\n        };\r\n        return icons[action] || 'ðŸ’¬';\r\n    };\r\n\r\n    // Helper: Get action variant\r\n    const getActionVariant = (action: string): 'primary' | 'danger' | 'warning' | undefined => {\r\n        if (action === 'safety_concern' || action === 'emergency_contact') return 'danger';\r\n        if (action === 'cancel_booking') return 'warning';\r\n        return 'primary';\r\n    };\r\n\r\n    return {\r\n        conversationId,\r\n        messages,\r\n        isLoading,\r\n        error,\r\n        bookingContext,\r\n        quickActions,\r\n        isEscalated,\r\n        escalationType,\r\n        sendMessage,\r\n        sendQuickAction,\r\n        initializeChatbot,\r\n    };\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}